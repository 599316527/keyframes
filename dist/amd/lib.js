define("Checker",["Util"],function(t){function n(){this._list=t.arg2Ary(arguments)}return n.prototype.check=function(n){var e=this;if(n.length!==e._list.length)return!1;var i,r,o=t.each(n,function(t,n){if(i=e._list[n],r=typeof i,"string"===r){if(typeof t!==i)return!1}else if("function"===r&&!(t instanceof i))return!1});return o},n.stringObject=new n("string","object"),n.objectString=new n("object","string"),n.object=new n("object"),n.string=new n("string"),n.ssFunction=new n("string","string","function"),n.sFunction=new n("string","function"),n.array=new n(Array),n}),define("ClassProxy",["Checker","Compiler"],function(t,n){function e(t,n){return n?this._define(t,n):this._className=t,this}return e.prototype._define=function(t,e){this._className=n.instance().defineClass(t,e)},e.prototype.hover=function(t){return this._pseudo("hover",t)},e.prototype.before=function(t){return this._pseudo("before",t)},e.prototype.after=function(t){return this._pseudo("after",t)},e.prototype.focus=function(t){return this._pseudo("focus",t)},e.prototype._name=function(t){return this._className+":"+t},e.prototype._pseudo=function(t,e){if(!e)throw new Error("incorrect parameter, metaData is required!");return n.instance().defineClass(this._name(t),e),this},e.prototype.rewrite=function(n,e){if(t.objectString.check(arguments))this._pseudo(e,n);else{if(!t.object.check(arguments))throw new Error("incorrect parameter!");this._define(this._className,n)}return this},e}),define("Compatible",["Util","Event"],function(t,n){var e={prefix:function(){var t=navigator.userAgent,n=t.indexOf("Opera")>-1,e=t.indexOf("Maxthon")>-1,i=!n&&t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1||t.indexOf("Trident")>-1,r=t.indexOf("Firefox")>-1,o=t.indexOf("Safari")>-1&&t.indexOf("Chrome")<1,s=t.indexOf("Chrome")>-1,a=t.indexOf("WebKit")>-1;return i?"-ms-":a||o||s||e?"-webkit-":n?"-o-":r?"-moz-":""}(),requestAnimationFrame:function(){return window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),function(t){window.requestAnimationFrame(t)}}(),css:function(e,i,r,o){return r||""===r?void this.requestAnimationFrame(function(){t.css(e,i,r),o.emit(n.css,e,i,r)}):t.css(e,i)},parseEvent:function(t,n){var e=this.prefix.replace(/-/g,"");return"moz"===e?function(n){return t+n.toLowerCase()}:function(t){return e+n+t}}};return e}),define("Compiler",["Checker","KFCompatible","Util","Event","EventEmitter"],function(t,n,e,i,r){function o(){o.superClass.call(this),this._classStore={},this._classMap={},this._keyframeMap={},this._keyframeStore={};var t=n.instance();this._compatible=t,this._classId=function(t){return"class("+t+")"},this._keyframeId=function(t){return"keyframe("+t+")"},this._classText=function(t,n){return"."+t+" "+n},this._keyframeText=function(n,e){return t.keyframe(n)+e}}return e.inherit(o,r),o.prototype.defineClass=function(t,n){return this._classMap[t]=n,t},o.prototype.defineKeyframe=function(t,n){return this._keyframeMap[t]=n,t},o.prototype.compile=function(){var t={},n={};e.forIn(this._classMap,function(n,e){t[n]=this._compileClass(e)},this),e.forIn(this._keyframeMap,function(t,e){n[t]=this._compileKeyframe(e)},this),this._classMap={},this._keyframeMap={},this._effect(t,n)},o.prototype._absorb=function(t,n,i,r,o){var s,a;e.forIn(t,function(t,e){s=n(t),a=i(t,e),t in r?this._refreshSheet(a,s):o.appendChild(this._styleSheet(a,s)),r[t]=e},this),t=null},o.prototype._effect=function(t,n){var e=this._fragment();this._absorb(t,this._classId,this._classText,this._classStore,e),this._absorb(n,this._keyframeId,this._keyframeText,this._keyframeStore,e),e.effect()},o.prototype._fragment=function(){var t=document.createDocumentFragment();return t.effect=function(){document.querySelector("head").appendChild(t)},t},o.prototype._styleSheet=function(t,n){var e=document.createElement("style");return e.type="text/css",e.id=n,e.innerHTML=t,this.emit(i.style,n,t),e},o.prototype.clear=function(){e.forIn(this._classStore,function(t){this._clearSheet(this._classId(t))},this),e.forIn(this._keyframeStore,function(t){this._clearSheet(this._keyframeId(t))},this),this._classStore={},this._keyframeStore={},this._classMap={},this._keyframeMap={}},o.prototype._refreshSheet=function(t,n){document.getElementById(n).innerHTML=t,this.emit(i.style,n,t)},o.prototype._clearSheet=function(t){document.querySelector("head").removeChild(document.getElementById(t))},o.prototype._compileClass=function(t){return"{"+this._compileContent(t)+"}"},o.prototype._compileContent=function(t){var n={},i=[];return e.forIn(t,function(t,e){i.push(this._compatible.patch(t,e,n))},this),e.forIn(n,function(t,n){i.push(this._compatible.patchCombine(t,n))},this),i.join("")},o.prototype._compileKeyframe=function(t){var n="{";return e.forIn(t,function(t,e){n+=this._compileFrame(t,e)},this),n+="}"},o.prototype._compileFrame=function(t,n){return this._compatible.percent(t)+this._compileClass(n)},o.instance=function(){return o._compiler||(o._compiler=new o),o._compiler},o}),define("Event",function(){var t={style:"Style",css:"Css",clear:"Clear",beforeStart:"BeforeStart",pause:"Pause",start:"Start",iteration:"Iteration",end:"End",done:"Done",over:"Over",on:"On",off:"Off",stop:"Stop",goon:"Goon",once:"Once",all:"All",emit:"Emit"};return t}),define("EventEmitter",["Checker","Event","Util"],function(t,n,e){function i(){this._triggers={}}return i.type={once:"once",all:"all"},i.prototype.on=function(t,e,i){if(!t)throw new Error("undefined event!");t in this._triggers?this._triggers[t].push({fn:e,option:i}):this._triggers[t]=[{fn:e,option:i}],this.emit(n.on,t,i)},i.prototype.off=function(i,r){if(t.string.check(arguments))i in this._triggers&&(this._triggers[i]=[],this.emit(n.off,i));else{if(!t.sFunction.check(arguments))throw new Error("incorrect parameter!");if(i in this._triggers){var o=-1;e.each(this._triggers[i],function(t,n){return t.fn===r?(o=n,!1):void 0}),o>-1&&(this._triggers[i].splice(o,1),this.emit(n.off,i))}}},i.prototype.once=function(t,e,r){r||(r={}),r.type=i.type.once,this.emit(n.once,t,r),this.on(t,e,r)},i.prototype.callWithScope=function(t,n,e){e=e||[],n&&n.hasOwnProperty("scope")?t.apply(n.scope,e):t.apply(this,e)},i.prototype.all=function(t,r,o){var s={},a=[];if(0===t.length)return void this.callWithScope(r,o);var c=this,f=function(t){return function(n,i){n in s&&(s[n]=!0,a[t]=i);var f=e.forIn(s,function(t,n){return n===!1?!1:void 0});f&&c.callWithScope(r,o,a)}};e.each(t,function(t,n){s[t]=!1,this.on(t,f(n),{type:i.type.all})}),this.emit(n.all,t,o)},i.prototype.emit=function(t){var n,i,r,o,s=this._triggers[t],a=[],c=arguments;if(s){var f=this;if(e.each(s,function(t){r=t.fn,o=t.option,o?(n=o.scope,i=o.type):(n=!1,i=!1),n?r.apply(n,e.arg2Ary(c)):r.apply(f,e.arg2Ary(c)),i&&a.push(t)}),a.length>0){var u,p,h=[],m=0,l=0,_=s.length,d=a.length;for(u=a[l];_>m;)p=s[m],p===u?(l++,u=d>l?a[l]:-1):h.push(p),m++;0===h.length?delete this._triggers[t]:this._triggers[t]=h}}},i}),define("FrameProxy",["Checker","Util","Compiler"],function(t,n,e){function i(t,n,e){return this._clazz=e,this._define(t,n)}return i.prototype._define=function(t,n){return this._frame=e.instance().defineKeyframe(t,n),this},i.prototype.getName=function(){return this._frame},i.prototype.rewrite=function(n){if(!t.object.check(arguments))throw new Error("incorrect parameter!");return this._define(this._frame,n),this},i.prototype.setConfig=function(t){return t.name=this._frame,this._config=t,this._configs=[t],this},i.prototype.getConfigs=function(){return this._configs},i.prototype.keyframe=function(t){var e={"@":"function","#":"count"},i={},r=t.replace(/([@#])([^@#]*)/g,function(t,n,e){return i[n]=e,""});return n.forIn(i,function(t,n){this._config[e[t]]=n},this),this._keyframe=new this._clazz(document.getElementById(r),this._configs),this._keyframe},i.prototype.combine=function(t){var n=t.getConfigs();return n&&(this._configs=this._configs.concat(n)),this},i}),define("Group",["Util","Event","EventEmitter"],function(t,n,e){function i(t){return i.superClass.call(this),this._frames=t,this}return t.inherit(i,e),i.prototype.onEnd=function(t,e){return this.on(n.end,t,e),this},i.prototype.start=function(){function e(t,e){i.push(e),i.length===r._frames.length&&r.emit(n.end,i)}var i=[],r=this;return t.each(this._frames,function(t){t.start(),t.on(n.over,e)}),this},i.prototype.clear=function(){return t.each(this._frames,function(t){t.stop()}),this},i}),define("Keyframe",["Checker","Util","Compiler","Group","ClassProxy","FrameProxy","Event","EventEmitter","Compatible","KFCompatible"],function(t,n,e,i,r,o,s,a,c,f){function u(i,r,o){u.superClass.call(this),this._compiler=e.instance(),this._compatible=f.instance(),this._dom=i,this._animationStatus={};var s=this;return r=n.extend(r,o),r?t.array.check([r])?(n.each(r,function(t){s._animationStatus[t.name]={ko:!1,count:t.count,record:0}}),this._animations=r):(this._animations=[r],this._animationStatus[r.name]={ko:!1,count:r.count,record:0}):this._animations=[],this._listen(),this}return n.inherit(u,a),u.prototype._listen=function(){function t(t){return function(n){e.emit(t,n)}}var e=this;this.on(s.on,function(i,r){r===s.start?e._monitorStart||(e._monitorStart=t(r),n.on(e._dom,e._compatible.parseEvent(r),e._monitorStart)):r===s.end?e._monitorEnd||(e._monitorEnd=t(r),n.on(e._dom,e._compatible.parseEvent(r),e._monitorEnd)):r===s.iteration&&(e._monitorIteration||(e._monitorIteration=t(r),n.on(e._dom,e._compatible.parseEvent(r),e._monitorIteration)))}),this.on(s.end,function(t,i){if(i.animationName in e._animationStatus){e._animationStatus[i.animationName].ko=!0;var r=n.forIn(e._animationStatus,function(t){return e._animationStatus[t].ko?void 0:!1});r&&e.emit(s.over,e._animationStatus)}}),this.on(s.iteration,function(t,i){if(i.animationName in e._animationStatus){var r=e._animationStatus[i.animationName];if(r.record++,"infinite"===r.count&&!r.ko){r.ko=!0;var o=n.forIn(e._animationStatus,function(t){return e._animationStatus[t].ko?void 0:!1});o&&e.emit(s.over,e._animationStatus)}}})},u.prototype.start=function(){var t=this._compatible,n=t.parseAnimation(this._animations),e=this._filter();return this.emit(s.beforeStart),""!==e?""!==n.trim()?t.css(this._dom,"animation",e+", "+n):t.css(this._dom,"animation",n):""!==n.trim()&&t.css(this._dom,"animation",n),this},u.prototype.pause=function(t){return this._playState("paused",t),this.emit(s.pause),this},u.prototype._filter=function(){var t=this._compatible.css(this._dom,"animation"),e=[];if(t){t=t.split(",");var i=["(?:none)"];n.each(this._animations,function(t){i.push("(?:"+t.name+")")});var r=this._compatible.regExp(i.join("|"));n.each(t,function(t){r.test(t)||e.push(t)})}return e.join(",").trim()},u.prototype.reflow=function(){var t=this._dom;return c.requestAnimationFrame(function(){t.offsetWidth=t.offsetWidth}),this},u.prototype.restart=function(){this.clear().reflow().start()},u.prototype.clear=function(){var t=this._compatible;return t.css(this._dom,"animation",this._filter()),n.forIn(this._animationStatus,function(t){this._animationStatus[t].ko=!1,this._animationStatus[t].record=0},this),this},u.prototype.stop=function(){this.clear();var t=this._compatible;return this._monitorStart&&(n.off(this._dom,t.parseEvent(s.start),this._monitorStart),this._monitorStart=!1),this._monitorEnd&&(n.off(this._dom,t.parseEvent(s.end),this._monitorEnd),this._monitorEnd=!1),this._monitorIteration&&(n.off(this._dom,t.parseEvent(s.iteration),this._monitorIteration),this._monitorIteration=!1),this.emit(s.stop),this},u.prototype.goon=function(t){return this._playState("running",t),this.emit(s.goon),this},u.prototype._c2A=function(t){var e=n.css(this._dom,this._compatible.parseCSS(t));return e.split(/,\s?/)},u.prototype._playState=function(t,e){var i,r=this._c2A("name"),o=this._c2A("state");if(e)i=n.xInA(e,r),i>-1&&(o[i]=t);else{var s;n.each(this._animations,function(e){s=e.name,i=n.xInA(s,r),i>-1&&(o[i]=t)})}return this._compatible.css(this._dom,"state",o.join(", ")),this},u.prototype.addClass=function(t){return n.addClass(this._dom,t),this},u.prototype.removeClass=function(t){return n.removeClass(this._dom,t),this},u.defineKeyframe=function(e,i){if(t.object.check(arguments))return i=arguments[0],e=n.random.name(8),new o(e,i,u);if(t.stringObject.check(arguments))return new o(e,i,u);throw new Error("incorrect parameters!")},u.defineClass=function(e,i){if(t.object.check(arguments)&&(i=arguments[0],e=n.random.name(8)),t.stringObject.check(arguments))return new r(e,i);if(t.string.check(arguments))return new r(e);throw new Error("incorrect parameters!")},u.pack=function(t){n.inherit(t,u);var e=t.cf["class"],i=t.cf.frame;n.forIn(e,function(t,n){u.defineClass(t,n)}),n.forIn(i,function(t,n){u.defineKeyframe(t,n)}),t.rewriteClass=function(i,r){e||(e=t.cf["class"]={}),i in e?n.rewrite(e[i],r):e[i]=r},t.rewriteFrame=function(e,r){i||(i=t.cf.frame={}),e in i?n.rewrite(i[e],r):i[e]=r}},u.compile=function(){e.instance().compile()},u.group=function(t){var e,r=[];return n.forIn(t,function(t,n){e=u.timeLine(n),r.push(e.keyframe(t))}),u.compile(),new i(r)},u.timeLine=function(t){var e=[],i={},r={};n.forIn(t,function(t){n.each(t.split(/\s+/),function(t){i[t]=parseFloat(t)})}),n.forIn(i,function(t,n){e.push(n)}),e.sort();var o=e[0],s=e[e.length-1],a=parseFloat(s-o).toFixed(3),c=-1;n.forIn(i,function(t,n){for(c=parseInt(Math.round(100*(n-o)/a),10);c in r;)c+=1;r[c]=!0,i[t]=c});var f={};n.forIn(t,function(t,e){c=t,n.each(t.split(/\s+/),function(t){c=c.replace(t,i[t])}),f[c]=e});var p=u.defineKeyframe(f);return p.setConfig({duration:a+"s",delay:o+"s"}),p},u}),define("KFCompatible",["Pitch","Util","Checker","Event","EventEmitter","Compatible"],function(t,n,e,i,r,o){function s(){s.superClass.call(this);var n=new t,e=this;n.use("prefixOnly","text-shadow backface-visibility transition transition-timing-function animation-timing-function transform-origin transform-style perspective-origin perspective",function(t,n){return"transform"===n&&(n=e.prefix+n),e.prefix+t+":"+n+";"}),n.use("needAll","box-shadow border-radius",function(t,n){return e.prefix+t+":"+n+";"+t+":"+n+";"}),n.use("extend","translateX translateY translateZ translate translate3d rotateX rotateY rotateZ rotate rotate3d skewX skewY skewZ skew scaleZ scaleX scaleY scale3d scale ",function(t,n,e){return"transform"in e?e.transform+=" "+t+"("+n+")":e.transform=t+"("+n+")",""}),n.use("transform","transform",function(t,n,e){return"transform"in e?e.transform+=" "+n:e.transform=n,""}),n.use("animation","animation",function(t,n){return e.prefix+t+":"+e.parseAnimation(n)+";"}),n.use("specialA","background",function(t,n){return t+":"+n.replace(/linear-gradient/g,e.prefix+"linear-gradient")+";"}),n.use("specialB","mask-image",function(t,n){return e.prefix+t+":"+n.replace(/linear-gradient/g,e.prefix+"linear-gradient")+";"}),n.use("rest","*",function(t,n){return t+":"+n+";"}),this._pitch=n,this._combine=new t("combine","transform",function(t,n){return e.prefix+t+":"+n+";"})}return n.inherit(s,r),s.prototype.prefix=o.prefix,s._keyMap={animation:["animation"],name:["animationName"],duration:["animationDuration","1s"],"function":["animationTimingFunction","linear"],delay:["animationDelay","0s"],count:["animationIterationCount",1],direction:["animationDirection","normal"],state:["animationPlayState","running"],mode:["animationFillMode","forwards"]},s.prototype.parseAnimation=function(t){function i(t,n){return n in r?r[n]:s._keyMap[n][1]}e.array.check(arguments)||(t=[t]);var r,o=[],a=this.animationTpl();return n.each(t,function(t){r=t,o.push(a.replace(/<(.*?)>/g,i))}),o.join(",")},s.prototype.animationTpl=function(){return this._animationTpl||("-moz-"===this.prefix?(this._animationTpl="<duration> <function> <delay> <direction> <mode> <count> <state> <name>",this._closeReg={start:"\\s",end:"(?:\\s*)$"}):(this._animationTpl="<name> <duration> <function> <delay> <count> <direction> <mode>",this._closeReg={start:"^(?:\\s*)",end:"\\s"})),this._animationTpl},s.prototype.regExp=function(t){return new RegExp(this._closeReg.start+t+this._closeReg.end)},s.prototype.keyframe=function(t){return"@"+this.prefix+"keyframes "+t},s.prototype.percent=function(t){t=(t+"").trim();var n=t.split(/\s+/);return n.join("%, ")+"%"},s.prototype.patchCombine=function(t,n){return this._combine["do"](t+" ",n)},s.prototype.patch=function(t,n,e){return this._pitch["do"](t+" ",n,e)},s.instance=function(){return s._compatible||(s._compatible=new s),s._compatible},s.prototype.css=function(t,n,e){return n=this.parseCSS(n),o.css(t,n,e,this)},s.prototype.parseCSS=function(t){var n=this.prefix.replace(/-/g,"");return s.prototype.parseCSS="moz"===n?function(t){return t in s._keyMap?s._keyMap[t][0]:t}:function(t){return t in s._keyMap?(t=s._keyMap[t][0],n+t[0].toUpperCase()+t.substr(1)):t},this.parseCSS(t)},s.prototype.parseEvent=o.parseEvent("animation","Animation"),s}),define("Pitch",["Checker"],function(t){function n(n,e,i){this._router=[],t.ssFunction.check(arguments)&&this.use(n,e,i)}return n.prototype.use=function(t,n,e){return this._router.push({name:t,keys:n+" ",handler:e}),this},n.prototype.next=function(t,n,e,i){var r=this._router[t];return r?"*"===r.keys.trim()?r.handler(n.trim(),e,i):r.keys.indexOf(n)>-1?r.handler(n.trim(),e,i):this.next(t+1,n,e,i):""},n.prototype["do"]=function(t,n,e){return this.next(0,t,n,e)},n}),define("Transform",["EventEmitter"],function(t){function n(t,e){return n.superClass.call(this),this._dom=t,this._executeInTime=e,this._steps=[],this._store={},this._index=0,this._listen(),this}return Util.inherit(n,t),n.prototype._combineTransform=function(t,n){var e=Util.css(this._dom,n);return e&&"none"!==e?e+" "+t.join(" "):t.join(" ")},n._keyMap={duration:"transitionDuration","function":"transitionTimingFunction",delay:"transitionDelay"},n.prototype.setExecuteInTime=function(t){this._executeInTime=t},n.prototype.moveBy=function(t){var e=n._apiMap.moveBy;return this._transform(t,e),this},n.prototype.then=function(t){var n=this._steps.length;if(n>0){var e=this._steps[n-1],i=e.next;e.next=i?function(){i(),t()}:t}else t();return this},n.prototype._step=function(t,e,i){var r=n,o=this,s={},a=o._steps.length;if(a>0){var c=o._steps[a-1],f=c.next;f?(c.next=function(){f(),Util.css(o._dom,r._theCore.css.transition,t),Util.css(o._dom,e())},o._index===o._steps.length&&(Util.css(o._dom,r._theCore.css.transition,t),Util.css(o._dom,e()))):(c.next=function(){Util.css(o._dom,r._theCore.css.transition,t),Util.css(o._dom,e())},o._index===o._steps.length&&c.next())}else s.execute=function(){Util.css(o._dom,r._theCore.css.transition,t),Util.css(o._dom,e())},this._executeInTime&&s.execute();s.status=i,s.next=!1,this._steps.push(s)},n.prototype.reStore=function(){Util.css(this._dom,this._store);for(var t;this._index>0;){this._index--,t=this._steps[this._index].status;for(var n in t)t[n]=!1}return this},n.prototype._reflow=function(){return this._dom.offsetWidth=this._dom.offsetWidth,this},n.prototype.reExecute=function(){return this.reStore()._reflow(),this.execute()},n.prototype.execute=function(){if(this._index<this._steps.length){var t=this._steps[this._index];"execute"in t&&t.execute()}return this},n.prototype._transform=function(t,e){var i=this,r=n,o=i._cssMap("transform"),s=[];t=this._fillTransformParams(t,e,s);var a={};return a.transform=!1,t.transitionProperty=o,this._step(r._parseTransition(t),function(){var t={},n=r._theCore.css.transform;return t[n]=i._combineTransform(s,n),t},a),this},n._clone=function(t,e){var i,r=n;if(t instanceof Array){i=[];for(var o=0;o<t.length;o++)i.push(r._clone(t[o],e))}else if("object"==typeof t){i={};for(var s in t)s in r._keyMap?i[r._keyMap[s]]=r._clone(t[s],e):s in e&&("api"in i||(i.api={}),i.api[e[s]]=r._clone(t[s],e))}else i=t;return i},n.prototype._fillTransformParams=function(t,e,i){var r=n,o=r._theCore.css.transform,s=r._theCore.css.transition;t=r._clone(t,e);var a=t.api;if(a)for(var c in a)i.push(c+"("+a[c]+")");return o in this._store||(this._store[o]=Util.css(this._dom,o)),s in this._store||(this._store[s]=Util.css(this._dom,s)),t},n.prototype.scaleBy=function(t){var e=n._apiMap.scaleBy;return this._transform(t,e),this},n.prototype._cssMap=function(t){var e,i=n._prefix;switch(t){case"transform":e="-webkit-"===i?i+t:t;break;case"backgroundColor":e="background-color";break;case"borderRadius":e="border-radius";break;case"fontSize":e="font-size";break;case"color":case"top":case"bottom":case"left":case"width":case"height":case"opacity":case"right":e=t;break;default:throw new Error(t+" not supported!")}return e},n._apiMap={changeTo:{c:"color",bc:"backgroundColor",fs:"fontSize",br:"borderRadius",o:"opacity",l:"left",r:"right",t:"top",b:"bottom",w:"width",h:"height"},moveTo:{t:"top",l:"left",b:"bottom",r:"right"},moveBy:{x:"translateX",y:"translateY",z:"translateZ","2d":"translate","3d":"translate3d"},scaleBy:{x:"scaleX",y:"scaleY",z:"scaleZ","2d":"scale","3d":"scale3d"},rotateBy:{x:"rotateX",y:"rotateY",z:"rotateZ","3d":"rotate3d","2d":"rotate"},skewBy:{x:"skewX",y:"skewY","2d":"skew"},perspective:{p:"perspective"}},n.prototype._css=function(t,n){var e=[],i={},r={};return this._fillCSSParams(t,n,e,i,r),this._step(e.join(","),function(){return i},r),this},n.prototype.perspectiveTo=function(t){var e=n._apiMap.perspective;return this._transform(t,e),this},n.prototype.skewBy=function(t){var e=n._apiMap.skewBy;return this._transform(t,e),this},n.prototype.rotateBy=function(t){var e=n._apiMap.rotateBy;return this._transform(t,e),this},n._extend=function(t,n){for(var e in n)e in t||(t[e]=n[e])},n.prototype.mix=function(t){var e,i=n,r=i._keyMap,o={};for(var s in r)s in t&&(o[s]=t[s],t[r[s]]=t[s]);var a,c=[],f={},u={},p=i._apiMap,h=[],m=0;for(var s in p)if(s in t)if(e=t[s],a=p[s],"moveTo"===s||"changeTo"===s){e instanceof Array||(e=[e]);for(var l=0,_=e.length;_>l;l++)i._extend(e[l],o);this._fillCSSParams(e,a,c,f,u)}else this._fillTransformParams(e,a,h),m++;var d;if(m>0){d=this;var y=d._cssMap("transform");u.transform=!1,t.transitionProperty=y,c.push(i._parseTransition(t))}return this._step(c.join(","),function(){if(m>0){var t=i._theCore.css.transform;f[t]=d._combineTransform(h,t)}return f},u),this},n.prototype.moveTo=function(t){var e=n._apiMap.moveTo;return this._css(t,e),this},n.prototype.changeTo=function(t){var e=n._apiMap.changeTo;return this._css(t,e),this},n.prototype._addStatus=function(t,n){var e=this._cssMap(n);return"border-radius"===e?(t["border-bottom-left-radius"]=!1,t["border-top-left-radius"]=!1,t["border-bottom-right-radius"]=!1,t["border-top-right-radius"]=!1):t[e]=!1,e},n.prototype._fillCSSParams=function(t,e,i,r,o){var s,a,c,f=n,u=f._theCore.css.transition;t=f._clone(t,e),t instanceof Array||(t=[t]);for(var p=0,h=t.length;h>p;p++){s=t[p],a=s.api||{};for(var m in a)c=this._addStatus(o,m),r[m]=a[m],m in this._store||(this._store[m]=Util.css(this._dom,m)),u in this._store||(this._store[u]=Util.css(this._dom,u)),s.transitionProperty=c,i.push(f._parseTransition(s))}},n._parseTransition=function(t){function e(n,e){if(e in t)return t[e];var i;switch(e){case"transitionDuration":i="1s";break;case"transitionTimingFunction":i="linear";break;case"transitionDelay":i="0s"}return i}return n._transitionTpl.replace(/<(.*?)>/g,e)},n._status={ED:0,ING:1},n._theCore=null,n._prefix="",n.getCore=function(){var t=n;if(!t._theCore){t._prefix=Compatible.instance().prefix,t._transitionTpl="<transitionProperty> <transitionDuration> <transitionTimingFunction> <transitionDelay>";var e=t._prefix.replace(/-/g,"");t._theCore={event:function(){return"moz"===e?{transitionEnd:"transitionend",transitionStart:"transitionstart"}:{transitionEnd:e+"TransitionEnd",transitionStart:e+"TransitionStart"}}(),css:function(){var t;return t="moz"===e?function(t){return t}:function(t){return e+t[0].toUpperCase()+t.substr(1)},{transition:t("transition"),transform:t("transform"),perspective:t("perspective"),transformStyle:t("transformStyle"),transformOrigin:t("transformOrigin"),backfaceVisibility:t("backfaceVisibility")}}()}}return t._theCore},n.getCore(),n.prototype.compatible=function(t){var e=n.getCore(),i={};for(var r in t)i[e.css[r]]=t[r];return i},n.prototype._on=function(t,n){return Util.on(this._dom,t,n),this},n.prototype._off=function(t,n){return Util.off(this._dom,t,n),this},n.prototype._unListen=function(){var t=this,e=n;t._monitorStart&&this._off(e._theCore.event.transitionStart,t._monitorStart),t._monitorEnd&&this._off(e._theCore.event.transitionEnd,t._monitorEnd)},n.prototype._listen=function(){function t(t){return function(n){e.emit(t,n)}}var e=this;this.on(Event.on,function(n,i){i===Event.start?e._monitorStart||(e._monitorStart=t(i),Util.on(e._dom,e._compatible.parseEvent(i),e._monitorStart)):i===Event.end&&(e._monitorEnd||(e._monitorEnd=t(i),Util.on(e._dom,e._compatible.parseEvent(i),e._monitorEnd)))}),this.on(Event.end,function(t,i){if(e._index<e._steps.length){var r=e._steps[e._index],o=i.propertyName.replace(n.prefix,"");if(o in r.status){r.status[o]=!0;var s=!0,a=r.status;for(var c in a)if(!a[c]){s=!1;break}s&&(e._status=it._status.ED,e.emit(Event.end,r),e._index++,r.next?r.next():e.emit(Event.done,r))}}Util.stopPropagation(i)}),this.on(Event.start,function(t,i){e._status=n._status.ING})},n.prototype.perspective=function(t){var e=n,i=this._dom.parentNode;return t===!1?Util.css(i,e._theCore.css.transformStyle,"flat"):(Util.css(i,e._theCore.css.transformStyle,"preserve-3d"),Util.css(i,e._theCore.css.perspective,t)),this},n}),define("Util",function(){var t={forIn:function(t,n,e){for(var i in t)if(n.call(e,i,t[i])===!1)return!1;return!0},rewrite:function(n,e){return e?(t.forIn(e,function(t,e){n[t]=e}),n):n},define:function(t){t=t.split(".");for(var n,e=window;n=t.shift();)n in e||(e[n]={}),e=e[n]},extend:function(n,e){return n?(e&&t.forIn(e,function(t,e){t in n||(n[t]=e)}),n):e},inherit:function(t,n){var e=new Function;e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t,t.superClass=n},xInA:function(n,e){var i=-1;return t.each(e,function(t,e){return t===n?(i=e,!1):void 0}),i},arg2Ary:function(t){return Array.prototype.slice.call(t,0)},each:function(t,n){for(var e=0,i=t.length;i>e&&n(t[e],e,t)!==!1;e++);return e===t.length},random:{generator:[function(){return String.fromCharCode(48+Math.round(9*Math.random()))},function(){return String.fromCharCode(65+Math.round(25*Math.random()))},function(){return String.fromCharCode(97+Math.round(25*Math.random()))}],word:function(n){var e;return e=0===n?Math.floor(2*Math.random())+1:Math.floor(3*Math.random()),t.random.generator[e]()},name:function(n){n=n||6;for(var e="",i=0;n>i;i++)e+=t.random.word(i);return e}},addClass:function(t,n){t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))||(t.className=(t.className+" "+n).trim())},removeClass:function(t,n){t.className=t.className.replace(new RegExp("(\\s|^)"+n+"(\\s|$)")," ").trim()},css:function(n,e,i){return"string"==typeof e?t.$css(n,e,i):void t.forIn(e,function(e,i){t.$css(n,e,i)})},stopPropagation:function(n){return t.stopPropagation=n.stopPropagation?function(t){t.stopPropagation()}:function(t){t.cancelBubble=!0},t.stopPropagation(n)},$css:function(n,e,i){return"undefined"!=typeof window.getComputedStyle?t.$css=function(t,n,e){if(void 0!==e)return t.style[n]=e,e;var i=window.getComputedStyle(t,null)[n];return i?i:t.style[n]}:"undefined"!=typeof n.currentStyle&&(t.$css=function(t,n,e){if(void 0!==e)return t.style[n]=e,e;var i=t.currentStyle[n];return i?i:t.style[n]}),this.$css(n,e,i)},on:function(n,e,i){return"addEventListener"in window?t.on=function(t,n,e){t.addEventListener(n,e,!1)}:"attachEvent"in window&&(t.on=function(t,n,e){t.attachEvent("on"+n,e)}),this.on(n,e,i)},off:function(n,e,i){"removeEventListener"in window?t.off=function(t,n,e){t.removeEventListener(n,e,!1)}:"detachEvent"in window&&(t.off=function(t,n,e){t.detachEvent("on"+n,e)}),this.off(n,e,i)}};return t});
window['define'] = typeof ESL_define === 'function' ? ESL_define : window['define'];define("Util",function(){var t={forIn:function(t,e,n){for(var r in t)if(e.call(n,r,t[r])===!1)return!1;return!0},forKey:function(t,e,n){for(var r in t)if(e.call(n,r)===!1)return!1;return!0},rewrite:function(e,n){return n?(t.forIn(n,function(t,n){e[t]=n}),e):e},define:function(t){t=t.split(".");for(var e,n=window;e=t.shift();)e in n||(n[e]={}),n=n[e]},extend:function(e,n){return e?(n&&t.forIn(n,function(t,n){t in e||(e[t]=n)}),e):n},inherit:function(t,e){var n=new Function;n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superClass=e},xInA:function(e,n){var r=-1;return t.each(n,function(t,n){return t===e?(r=n,!1):void 0}),r},arg2Ary:function(t){return Array.prototype.slice.call(t,0)},each:function(t,e,n){for(var r=0,o=t.length;o>r&&e.call(n,t[r],r,t)!==!1;r++);return r===t.length},random:{seed:[[48,9],[65,25],[97,25]],generator:function(t){return String.fromCharCode(t[0]+Math.round(t[1]*Math.random()))},word:function(t){var e;return e=0===t?Math.floor(2*Math.random())+1:Math.floor(3*Math.random()),this.generator(this.seed[e])},name:function(t){t=t||6;for(var e="",n=0;t>n;n++)e+=this.word(n);return e}},addClass:function(t,e){t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))||(t.className=(t.className+" "+e).trim())},removeClass:function(t,e){t.className=t.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").trim()},css:function(e,n,r){return"string"==typeof n?t.$css(e,n,r):void t.forIn(n,function(n,r){t.$css(e,n,r)})},stopPropagation:function(t){t.stopPropagation()},$css:function(t,e,n){if(void 0!==n)return t.style[e]=n,n;var r=window.getComputedStyle(t,null)[e];return r?r:t.style[e]},on:function(t,e,n){t.addEventListener(e,n,!1)},off:function(t,e,n){t.removeEventListener(e,n,!1)}};return t}),define("Checker",["Util"],function(t){function e(){this._list=t.arg2Ary(arguments)}return e.prototype.check=function(e){var n=this;if(e.length!==n._list.length)return!1;var r,o,i=t.each(e,function(t,e){if(r=n._list[e],o=typeof r,"string"===o){if(typeof t!==r)return!1}else if("function"===o&&!(t instanceof r))return!1});return i},e.stringObject=new e("string","object"),e.objectString=new e("object","string"),e.object=new e("object"),e.string=new e("string"),e.ssFunction=new e("string","string","function"),e.sFunction=new e("string","function"),e.array=new e(Array),e}),define("Event",function(){var t={style:"Style",css:"CSS",clear:"Clear",beforeStart:"BeforeStart",pause:"Pause",start:"Start",iteration:"Iteration",end:"End",next:"Next",over:"Over",on:"On",off:"Off",stop:"Stop",goon:"Goon",once:"Once",all:"All",emit:"Emit"};return t}),define("EventEmitter",["Checker","Event","Util"],function(t,e,n){function r(){this._triggers={}}return r.type={once:"once",all:"all"},r.prototype.on=function(t,n,r){if(!t)throw new Error("undefined event!");t in this._triggers?this._triggers[t].push({fn:n,option:r}):this._triggers[t]=[{fn:n,option:r}],this.emit(e.on,t,r)},r.prototype.off=function(r,o){if(t.string.check(arguments))r in this._triggers&&(this._triggers[r]=[],this.emit(e.off,r));else{if(!t.sFunction.check(arguments))throw new Error("incorrect parameter!");if(r in this._triggers){var i=-1;n.each(this._triggers[r],function(t,e){return t.fn===o?(i=e,!1):void 0}),i>-1&&(this._triggers[r].splice(i,1),this.emit(e.off,r))}}},r.prototype.once=function(t,n,o){o||(o={}),o.type=r.type.once,this.emit(e.once,t,o),this.on(t,n,o)},r.prototype.callWithScope=function(t,e,n){n=n||[],e&&e.hasOwnProperty("scope")?t.apply(e.scope,n):t.apply(this,n)},r.prototype.all=function(t,o,i){var s={},a=[];if(0===t.length)return void this.callWithScope(o,i);var c=this,p=function(t){return function(e,r){e in s&&(s[e]=!0,a[t]=r);var p=n.forIn(s,function(t,e){return e===!1?!1:void 0});p&&c.callWithScope(o,i,a)}};n.each(t,function(t,e){s[t]=!1,this.on(t,p(e),{type:r.type.all})},c),this.emit(e.all,t,i)},r.prototype.emit=function(t){var e,r,o,i,s=this._triggers[t],a=[],c=arguments;if(s){var p=this;if(n.each(s,function(t){o=t.fn,i=t.option,i?(e=i.scope,r=i.type):(e=!1,r=!1),e?o.apply(e,n.arg2Ary(c)):o.apply(p,n.arg2Ary(c)),r&&a.push(t)}),a.length>0){var f,u,h=[],l=0,d=0,m=s.length,_=a.length;for(f=a[d];m>l;)u=s[l],u===f?(d++,f=_>d?a[d]:-1):h.push(u),l++;0===h.length?delete this._triggers[t]:this._triggers[t]=h}}},r}),define("Compatible",["Util","Event"],function(t,e){var n={prefix:function(){var t=navigator.userAgent,e=t.indexOf("Opera")>-1,n=t.indexOf("Maxthon")>-1,r=!e&&t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1||t.indexOf("Trident")>-1,o=t.indexOf("Firefox")>-1,i=t.indexOf("Safari")>-1&&t.indexOf("Chrome")<1,s=t.indexOf("Chrome")>-1,a=t.indexOf("WebKit")>-1;return r?"-ms-":a||i||s||n?"-webkit-":e?"-o-":o?"-moz-":""}(),requestAnimationFrame:function(){var e,n=[];return window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(r){n.push(r),e||(e=window.setTimeout(function(){t.each(n,function(t){t()}),clearTimeout(e),e=!1,n=[]},1e3/60))},function(t){window.requestAnimationFrame(t)}}(),css:function(r,o,i,s){return i||""===i?void n.requestAnimationFrame(function(){t.css(r,o,i),s.emit(e.css,r,o,i)}):t.css(r,o)},reflow:function(t){n.requestAnimationFrame(function(){t.offsetWidth=t.offsetWidth})},parseEvent:function(t,e){var r=n.prefix.replace(/-/g,"");return"moz ms".indexOf(r)>-1?function(e){return t+e.toLowerCase()}:function(t){return r+e+t}}};return n}),define("TFCompatible",["Util","Event","EventEmitter","Compatible"],function(t,e,n,r){function o(){o.superClass.call(this)}return t.inherit(o,n),o.prototype.prefix=r.prefix,o._keyMap={transform:["transform"],transition:["transition"],duration:["transitionDuration","1s"],"function":["transitionTimingFunction","linear"],delay:["transitionDelay","0s"]},o.prototype.parseCSS=function(t){var e=this.prefix.replace(/-/g,"");return o.prototype.parseCSS="moz ms".indexOf(e)>-1?function(t){return t in o._keyMap?o._keyMap[t][0]:t}:function(t){return t in o._keyMap?(t=o._keyMap[t][0],e+t[0].toUpperCase()+t.substr(1)):t},this.parseCSS(t)},o.prototype.cssMap=function(t){var e;switch(t){case"transform":e="-webkit-"===this.prefix?this.prefix+t:t;break;case"backgroundColor":e="background-color";break;case"borderRadius":e="border-radius";break;case"fontSize":e="font-size";break;case"color":case"top":case"bottom":case"left":case"width":case"height":case"opacity":case"border":case"right":e=t;break;default:throw new Error(t+" not supported!")}return e},o.prototype.eventMap={"border-radius":["border-bottom-left-radius","border-top-left-radius","border-bottom-right-radius","border-top-right-radius"],border:["border-left-width","border-top-width","border-right-width","border-bottom-width","border-left-color","border-top-color","border-right-color","border-bottom-color"]},o.prototype.addStatus=function(t,e){var n=this.cssMap(e);return n in this.eventMap?t.add(n,this.eventMap[n]):t.add(n),n},o.prototype.peelMould=function(e){var n={};return t.forKey(o._keyMap,function(t){t in e&&(n[t]=e[t])}),n},o.prototype.clone=function(e,n){var r,i=o._keyMap;return e instanceof Array?(r=[],t.each(e,function(t){r.push(this.clone(t,n))},this)):"object"==typeof e?(r={},t.forIn(e,function(t,e){e&&(t in i?r[t]=this.clone(e,n):t in n&&("api"in r||(r.api={}),r.api[n[t]]=this.clone(e,n)))},this)):r=e,r},o.prototype.parseTransition=function(t){function e(e,n){return n in t?t[n]:o._keyMap[n][1]}return"<property> <duration> <function> <delay>".replace(/<(.*?)>/g,e)},o.instance=function(){return o._compatible||(o._compatible=new o),o._compatible},o.prototype.parseEvent=r.parseEvent("transition","Transition"),o}),define("Status",["Util"],function(t){function e(){this.init(),this.size=0,this.store=[]}return e.sep="|",e.prototype.init=function(){this.all={},this.once={},this.addUp=0},e.prototype.add=function(t,n,r){this.all[t]=!1;var o=e.sep;n&&(this.once[t]=o+n.join(o+o)+o),r||(this.store.push({all:t,once:n}),this.size++)},e.prototype.reset=function(){this.init(),t.each(this.store,function(t){this.add(t.all,t.once,!0)},this)},e.prototype.isDone=function(){return this.size===this.addUp},e.prototype.digest=function(n){var r=this.all,o=this.once,i=e.sep;n in r?(r[n]=!0,delete o[n],this.addUp++):t.forIn(o,function(t,e){return e=e.replace(i+n+i,""),o[t]=e,""===e?(r[n]=!0,this.addUp++,delete o[n],!1):void 0},this)},e}),define("Transform",["EventEmitter","Util","Compatible","TFCompatible","Event","Status"],function(t,e,n,r,o,i){function s(t,e){s.superClass.call(this),this._dom=t,this._executeInTime=e,this._steps=[],this._store={},this._index=0,this._transformRecord="",this._compatible=r.instance(),this._listen()}return e.inherit(s,t),s.prototype._listen=function(){function t(t){return function(e){n.emit(t,e)}}var n=this,r=n._compatible;this.on(o.on,function(e,i){i===o.end&&(n._monitorEnd||(n._monitorEnd=t(i),n._on(r.parseEvent(i),n._monitorEnd)))}),this.on(o.end,function(t,i){if(n._index<n._steps.length){var s=n._steps[n._index],a=i.propertyName.replace(r.prefix,"");s.status.digest(a),s.status.isDone()&&(n._index++,s.next?(n.emit(o.next,s),s.next()):n.emit(o.over,s))}e.stopPropagation(i)})},s.prototype.setExecuteInTime=function(t){return this._executeInTime=t,this},s.prototype.reStore=function(){n.css(this._dom,this._store,"",this);for(var t;this._index>0;)this._index--,t=this._steps[this._index].status,t.reset();return this._transformRecord="",this},s.prototype.reflow=function(){return n.reflow(this._dom),this},s.prototype.reExecute=function(){return this.reStore().reflow(),this.execute()},s.prototype.execute=function(){if(this._index<this._steps.length){var t=this._steps[this._index];"execute"in t&&t.execute()}return this},s._apiMap={changeTo:{c:"color",bc:"backgroundColor",fs:"fontSize",br:"borderRadius",bo:"border",o:"opacity",l:"left",r:"right",t:"top",b:"bottom",w:"width",h:"height"},moveTo:{t:"top",l:"left",b:"bottom",r:"right"},moveBy:{x:"translateX",y:"translateY",z:"translateZ","2d":"translate","3d":"translate3d"},scaleBy:{x:"scaleX",y:"scaleY",z:"scaleZ","2d":"scale","3d":"scale3d"},rotateBy:{x:"rotateX",y:"rotateY",z:"rotateZ","3d":"rotate3d"},skewBy:{x:"skewX",y:"skewY","2d":"skew"}},s.prototype._step=function(t,e,r){var o=this,i=o._compatible,s={},a=o._steps.length;if(a>0){var c=o._steps[a-1],p=c.next;p?(c.next=function(){p(),n.css(o._dom,i.parseCSS("transition"),t,o),n.css(o._dom,e(),"",o)},o._index===o._steps.length&&(n.css(o._dom,i.parseCSS("transition"),t,o),n.css(o._dom,e(),"",o))):(c.next=function(){n.css(o._dom,i.parseCSS("transition"),t,o),n.css(o._dom,e(),"",o)},o._index===o._steps.length&&c.next())}else s.execute=function(){n.css(o._dom,i.parseCSS("transition"),t,o),n.css(o._dom,e(),"",o)},this._executeInTime&&s.execute();s.status=r,s.next=!1,this._steps.push(s)},s.prototype._combineTransform=function(t){return this._transformRecord+=t.join(" "),this._transformRecord},s.prototype._fillTransformParams=function(t,n,r){var o=this._compatible,i=o.parseCSS("transform"),s=o.parseCSS("transition");t=o.clone(t,n);var a=t.api;if(!a)throw new Error("不健全的配置项！");e.forIn(a,function(t,e){r.push(t+"("+e+")")}),i in this._store||(this._store[i]=e.css(this._dom,i)),s in this._store||(this._store[s]=e.css(this._dom,s))},s.prototype._transform=function(t,e){var n=this,r=n._compatible,o=r.cssMap("transform"),s=[];this._fillTransformParams(t,e,s);var a=new i;a.add("transform"),t.property=o,this._step(r.parseTransition(t),function(){var t={},e=r.parseCSS("transform");return t[e]=n._combineTransform(s),t},a)},s.prototype._fillCSSParams=function(t,n,r,o,i){var s,a=this,c=a._compatible.parseCSS("transition");return t=a._compatible.clone(t,n),t instanceof Array||(t=[t]),e.each(t,function(t){if(!t.api)throw new Error("不健全的配置！");e.forIn(t.api,function(n,p){s=this._compatible.addStatus(i,n),o[n]=p,n in this._store||(this._store[n]=e.css(this._dom,n)),c in this._store||(this._store[c]=e.css(this._dom,c)),t.property=s,r.push(a._compatible.parseTransition(t))},a)}),t},s.prototype._css=function(t,e){var n=[],r={},o=new i;this._fillCSSParams(t,e,n,r,o),this._step(n.join(","),function(){return r},o)},s.prototype.moveTo=function(t){var e=s._apiMap.moveTo;return t=this._patchMoveTo(t,e),this._css(t,e),this},s.prototype._patchMoveTo=function(t,n){t instanceof Array||(t=[t]);var r,o,i=this._dom,s={};return e.each(t,function(t){e.forKey(t,function(t){t in n&&(o=n[t],r=e.css(i,o),r&&"auto"!==r||(s[o]=0))})}),e.forIn(s,function(t,n){e.css(i,t,n)}),t},s.prototype.changeTo=function(t){var e=s._apiMap.changeTo;return t=this._patchMoveTo(t,s._apiMap.moveTo),this._css(t,e),this},s.prototype.moveBy=function(t){var e=s._apiMap.moveBy;return this._transform(t,e),this},s.prototype.scaleBy=function(t){var e=s._apiMap.scaleBy;return this._transform(t,e),this},s.prototype.skewBy=function(t){var e=s._apiMap.skewBy;return this._transform(t,e),this},s.prototype.rotateBy=function(t){var e=s._apiMap.rotateBy;return this._transform(t,e),this},s.prototype.mock=function(t,n){var r=s._apiMap[t],o={},a=new i,c=[];if("moveTo changeTo".indexOf(t)>-1)return this._fillCSSParams(n,r,c,o,a),[c.join(","),o,a];var p=this._compatible,f=p.parseCSS("transform"),u=[],h=p.cssMap("transform");if("mix"===t){var l,d=this._compatible.peelMould(n),m=0;return e.forIn(s._apiMap,function(t,r){t in n&&(l=n[t],"moveTo"===t||"changeTo"===t?(l=this._patchMoveTo(l,s._apiMap.moveTo),e.each(l,function(t){e.extend(t,d)}),this._fillCSSParams(l,r,c,o,a)):(this._fillTransformParams(l,r,u),m++))},this),m>0&&(a.add("transform"),n.property=h,c.push(p.parseTransition(n))),m>0&&(f=p.parseCSS("transform"),o[f]="old+; "+u.join(" ")),[c.join(","),o,a]}return this._fillTransformParams(n,r,u),a.add("transform"),n.property=h,o[f]="old+; "+u.join(" "),[p.parseTransition(n),o,a]},s.prototype.mix=function(t){var n,r=this._compatible.peelMould(t),o=[],a={},c=new i,p=[],f=0;e.forIn(s._apiMap,function(i,u){i in t&&(n=t[i],"moveTo"===i||"changeTo"===i?(n=this._patchMoveTo(n,s._apiMap.moveTo),e.each(n,function(t){e.extend(t,r)}),this._fillCSSParams(n,u,o,a,c)):(this._fillTransformParams(n,u,p),f++))},this);var u=this,h=u._compatible;if(f>0){var l=h.cssMap("transform");c.add("transform"),t.property=l,o.push(h.parseTransition(t))}return this._step(o.join(","),function(){if(f>0){var t=h.parseCSS("transform");a[t]=u._combineTransform(p,t)}return a},c),this},s.prototype.then=function(t){var e=this._steps.length;if(e>0){var n=this._steps[e-1],r=n.next;n.next=r?function(){r(),t()}:t}else t();return this},s.prototype._on=function(t,n){e.on(this._dom,t,n)},s.prototype._off=function(t,n){e.off(this._dom,t,n)},s.prototype._unListen=function(){this._monitorStart&&this._off(this._compatible.parseEvent(o.start),this._monitorStart),this._monitorEnd&&this._off(this._compatible.parseEvent(o.end),this._monitorEnd)},s.prototype.perspective=function(t){var e=this._compatible,r=this._dom.parentNode;return t===!1?n.css(r,e.parseCSS("transformStyle"),"flat",this):(n.css(r,e.parseCSS("transformStyle"),"preserve-3d",this),n.css(r,e.parseCSS("perspective"),t,this)),this},s});
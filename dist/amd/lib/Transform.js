define("Util",function(){var t={forIn:function(t,n,e){for(var r in t)if(n.call(e,r,t[r])===!1)return!1;return!0},forKey:function(t,n,e){for(var r in t)if(n.call(e,r)===!1)return!1;return!0},rewrite:function(n,e){return e?(t.forIn(e,function(t,e){n[t]=e}),n):n},define:function(t){t=t.split(".");for(var n,e=window;n=t.shift();)n in e||(e[n]={}),e=e[n]},extend:function(n,e){return n?(e&&t.forIn(e,function(t,e){t in n||(n[t]=e)}),n):e},inherit:function(t,n){var e=new Function;e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t,t.superClass=n},xInA:function(n,e){var r=-1;return t.each(e,function(t,e){return t===n?(r=e,!1):void 0}),r},arg2Ary:function(t){return Array.prototype.slice.call(t,0)},each:function(t,n,e){for(var r=0,o=t.length;o>r&&n.call(e,t[r],r,t)!==!1;r++);return r===t.length},random:{generator:[function(){return String.fromCharCode(48+Math.round(9*Math.random()))},function(){return String.fromCharCode(65+Math.round(25*Math.random()))},function(){return String.fromCharCode(97+Math.round(25*Math.random()))}],word:function(n){var e;return e=0===n?Math.floor(2*Math.random())+1:Math.floor(3*Math.random()),t.random.generator[e]()},name:function(n){n=n||6;for(var e="",r=0;n>r;r++)e+=t.random.word(r);return e}},addClass:function(t,n){t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))||(t.className=(t.className+" "+n).trim())},removeClass:function(t,n){t.className=t.className.replace(new RegExp("(\\s|^)"+n+"(\\s|$)")," ").trim()},css:function(n,e,r){return"string"==typeof e?t.$css(n,e,r):void t.forIn(e,function(e,r){t.$css(n,e,r)})},stopPropagation:function(n){return t.stopPropagation=n.stopPropagation?function(t){t.stopPropagation()}:function(t){t.cancelBubble=!0},t.stopPropagation(n)},$css:function(n,e,r){return"undefined"!=typeof window.getComputedStyle?t.$css=function(t,n,e){if(void 0!==e)return t.style[n]=e,e;var r=window.getComputedStyle(t,null)[n];return r?r:t.style[n]}:"undefined"!=typeof n.currentStyle&&(t.$css=function(t,n,e){if(void 0!==e)return t.style[n]=e,e;var r=t.currentStyle[n];return r?r:t.style[n]}),this.$css(n,e,r)},on:function(n,e,r){return"addEventListener"in window?t.on=function(t,n,e){t.addEventListener(n,e,!1)}:"attachEvent"in window&&(t.on=function(t,n,e){t.attachEvent("on"+n,e)}),this.on(n,e,r)},off:function(n,e,r){"removeEventListener"in window?t.off=function(t,n,e){t.removeEventListener(n,e,!1)}:"detachEvent"in window&&(t.off=function(t,n,e){t.detachEvent("on"+n,e)}),this.off(n,e,r)}};return t}),define("Checker",["Util"],function(t){function n(){this._list=t.arg2Ary(arguments)}return n.prototype.check=function(n){var e=this;if(n.length!==e._list.length)return!1;var r,o,i=t.each(n,function(t,n){if(r=e._list[n],o=typeof r,"string"===o){if(typeof t!==r)return!1}else if("function"===o&&!(t instanceof r))return!1});return i},n.stringObject=new n("string","object"),n.objectString=new n("object","string"),n.object=new n("object"),n.string=new n("string"),n.ssFunction=new n("string","string","function"),n.sFunction=new n("string","function"),n.array=new n(Array),n}),define("Event",function(){var t={style:"Style",css:"CSS",clear:"Clear",beforeStart:"BeforeStart",pause:"Pause",start:"Start",iteration:"Iteration",end:"End",next:"Next",over:"Over",on:"On",off:"Off",stop:"Stop",goon:"Goon",once:"Once",all:"All",emit:"Emit"};return t}),define("EventEmitter",["Checker","Event","Util"],function(t,n,e){function r(){this._triggers={}}return r.type={once:"once",all:"all"},r.prototype.on=function(t,e,r){if(!t)throw new Error("undefined event!");t in this._triggers?this._triggers[t].push({fn:e,option:r}):this._triggers[t]=[{fn:e,option:r}],this.emit(n.on,t,r)},r.prototype.off=function(r,o){if(t.string.check(arguments))r in this._triggers&&(this._triggers[r]=[],this.emit(n.off,r));else{if(!t.sFunction.check(arguments))throw new Error("incorrect parameter!");if(r in this._triggers){var i=-1;e.each(this._triggers[r],function(t,n){return t.fn===o?(i=n,!1):void 0}),i>-1&&(this._triggers[r].splice(i,1),this.emit(n.off,r))}}},r.prototype.once=function(t,e,o){o||(o={}),o.type=r.type.once,this.emit(n.once,t,o),this.on(t,e,o)},r.prototype.callWithScope=function(t,n,e){e=e||[],n&&n.hasOwnProperty("scope")?t.apply(n.scope,e):t.apply(this,e)},r.prototype.all=function(t,o,i){var s={},a=[];if(0===t.length)return void this.callWithScope(o,i);var c=this,f=function(t){return function(n,r){n in s&&(s[n]=!0,a[t]=r);var f=e.forIn(s,function(t,n){return n===!1?!1:void 0});f&&c.callWithScope(o,i,a)}};e.each(t,function(t,n){s[t]=!1,this.on(t,f(n),{type:r.type.all})}),this.emit(n.all,t,i)},r.prototype.emit=function(t){var n,r,o,i,s=this._triggers[t],a=[],c=arguments;if(s){var f=this;if(e.each(s,function(t){o=t.fn,i=t.option,i?(n=i.scope,r=i.type):(n=!1,r=!1),n?o.apply(n,e.arg2Ary(c)):o.apply(f,e.arg2Ary(c)),r&&a.push(t)}),a.length>0){var p,u,h=[],l=0,m=0,d=s.length,_=a.length;for(p=a[m];d>l;)u=s[l],u===p?(m++,p=_>m?a[m]:-1):h.push(u),l++;0===h.length?delete this._triggers[t]:this._triggers[t]=h}}},r}),define("Compatible",["Util","Event"],function(t,n){var e={prefix:function(){var t=navigator.userAgent,n=t.indexOf("Opera")>-1,e=t.indexOf("Maxthon")>-1,r=!n&&t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1||t.indexOf("Trident")>-1,o=t.indexOf("Firefox")>-1,i=t.indexOf("Safari")>-1&&t.indexOf("Chrome")<1,s=t.indexOf("Chrome")>-1,a=t.indexOf("WebKit")>-1;return r?"-ms-":a||i||s||e?"-webkit-":n?"-o-":o?"-moz-":""}(),requestAnimationFrame:function(){return window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),function(t){window.requestAnimationFrame(t)}}(),css:function(r,o,i,s){return i||""===i?void e.requestAnimationFrame(function(){t.css(r,o,i),s.emit(n.css,r,o,i)}):t.css(r,o)},reflow:function(t){e.requestAnimationFrame(function(){t.offsetWidth=t.offsetWidth})},parseEvent:function(t,n){var r=e.prefix.replace(/-/g,"");return"moz ms".indexOf(r)>-1?function(n){return t+n.toLowerCase()}:function(t){return r+n+t}}};return e}),define("TFCompatible",["Util","Event","EventEmitter","Compatible"],function(t,n,e,r){function o(){o.superClass.call(this)}return t.inherit(o,e),o.prototype.prefix=r.prefix,o._keyMap={transform:["transform"],transition:["transition"],duration:["transitionDuration","1s"],"function":["transitionTimingFunction","linear"],delay:["transitionDelay","0s"]},o.prototype.parseCSS=function(t){var n=this.prefix.replace(/-/g,"");return o.prototype.parseCSS="moz ms".indexOf(n)>-1?function(t){return t in o._keyMap?o._keyMap[t][0]:t}:function(t){return t in o._keyMap?(t=o._keyMap[t][0],n+t[0].toUpperCase()+t.substr(1)):t},this.parseCSS(t)},o.prototype.cssMap=function(t){var n;switch(t){case"transform":n="-webkit-"===this.prefix?this.prefix+t:t;break;case"backgroundColor":n="background-color";break;case"borderRadius":n="border-radius";break;case"fontSize":n="font-size";break;case"color":case"top":case"bottom":case"left":case"width":case"height":case"opacity":case"border":case"right":n=t;break;default:throw new Error(t+" not supported!")}return n},o.prototype.addStatus=function(t,n){var e=this.cssMap(n);return"border-radius"===e?(t["border-bottom-left-radius"]=!1,t["border-top-left-radius"]=!1,t["border-bottom-right-radius"]=!1,t["border-top-right-radius"]=!1):"border"===e?(t["border-left-width"]=!1,t["border-top-width"]=!1,t["border-right-width"]=!1,t["border-bottom-width"]=!1,t["border-left-color"]=!1,t["border-top-color"]=!1,t["border-right-color"]=!1,t["border-bottom-color"]=!1):t[e]=!1,e},o.prototype.peelMould=function(n){var e={};return t.forKey(o._keyMap,function(t){t in n&&(e[t]=n[t])}),e},o.prototype.clone=function(n,e){var r,i=o._keyMap;return n instanceof Array?(r=[],t.each(n,function(t){r.push(this.clone(t,e))},this)):"object"==typeof n?(r={},t.forIn(n,function(t,n){n&&(t in i?r[t]=this.clone(n,e):t in e&&("api"in r||(r.api={}),r.api[e[t]]=this.clone(n,e)))},this)):r=n,r},o.prototype.parseTransition=function(t){function n(n,e){return e in t?t[e]:o._keyMap[e][1]}return"<property> <duration> <function> <delay>".replace(/<(.*?)>/g,n)},o.instance=function(){return o._compatible||(o._compatible=new o),o._compatible},o.prototype.parseEvent=r.parseEvent("transition","Transition"),o}),define("Transform",["EventEmitter","Util","Compatible","TFCompatible","Event"],function(t,n,e,r,o){function i(t,n){i.superClass.call(this),this._dom=t,this._executeInTime=n,this._steps=[],this._store={},this._index=0,this._transformRecord="",this._compatible=r.instance(),this._listen()}return n.inherit(i,t),i.prototype._listen=function(){function t(t){return function(n){e.emit(t,n)}}var e=this,r=e._compatible;this.on(o.on,function(n,i){i===o.end&&(e._monitorEnd||(e._monitorEnd=t(i),e._on(r.parseEvent(i),e._monitorEnd)))}),this.on(o.end,function(t,i){if(e._index<e._steps.length){var s=e._steps[e._index],a=i.propertyName.replace(r.prefix,"");if(a in s.status){s.status[a]=!0;var c=s.status,f=n.forIn(c,function(t,n){return n?void 0:!1});f&&(e._index++,s.next?(e.emit(o.next,s),s.next()):e.emit(o.over,s))}}n.stopPropagation(i)})},i.prototype.setExecuteInTime=function(t){return this._executeInTime=t,this},i.prototype.reStore=function(){e.css(this._dom,this._store,"",this);for(var t;this._index>0;)this._index--,t=this._steps[this._index].status,n.forKey(t,function(n){t[n]=!1});return this._transformRecord="",this},i.prototype.reflow=function(){return e.reflow(this._dom),this},i.prototype.reExecute=function(){return this.reStore().reflow(),this.execute()},i.prototype.execute=function(){if(this._index<this._steps.length){var t=this._steps[this._index];"execute"in t&&t.execute()}return this},i._apiMap={changeTo:{c:"color",bc:"backgroundColor",fs:"fontSize",br:"borderRadius",bo:"border",o:"opacity",l:"left",r:"right",t:"top",b:"bottom",w:"width",h:"height"},moveTo:{t:"top",l:"left",b:"bottom",r:"right"},moveBy:{x:"translateX",y:"translateY",z:"translateZ","2d":"translate","3d":"translate3d"},scaleBy:{x:"scaleX",y:"scaleY",z:"scaleZ","2d":"scale","3d":"scale3d"},rotateBy:{x:"rotateX",y:"rotateY",z:"rotateZ","3d":"rotate3d"},skewBy:{x:"skewX",y:"skewY","2d":"skew"}},i.prototype._step=function(t,n,r){var o=this,i=o._compatible,s={},a=o._steps.length;if(a>0){var c=o._steps[a-1],f=c.next;f?(c.next=function(){f(),e.css(o._dom,i.parseCSS("transition"),t,o),e.css(o._dom,n(),"",o)},o._index===o._steps.length&&(e.css(o._dom,i.parseCSS("transition"),t,o),e.css(o._dom,n(),"",o))):(c.next=function(){e.css(o._dom,i.parseCSS("transition"),t,o),e.css(o._dom,n(),"",o)},o._index===o._steps.length&&c.next())}else s.execute=function(){e.css(o._dom,i.parseCSS("transition"),t,o),e.css(o._dom,n(),"",o)},this._executeInTime&&s.execute();s.status=r,s.next=!1,this._steps.push(s)},i.prototype._combineTransform=function(t){return this._transformRecord+=t.join(" "),this._transformRecord},i.prototype._fillTransformParams=function(t,e,r){var o=this._compatible,i=o.parseCSS("transform"),s=o.parseCSS("transition");t=o.clone(t,e);var a=t.api;if(!a)throw new Error("不健全的配置项！");n.forIn(a,function(t,n){r.push(t+"("+n+")")}),i in this._store||(this._store[i]=n.css(this._dom,i)),s in this._store||(this._store[s]=n.css(this._dom,s))},i.prototype._transform=function(t,n){var e=this,r=e._compatible,o=r.cssMap("transform"),i=[];this._fillTransformParams(t,n,i);var s={};s.transform=!1,t.property=o,this._step(r.parseTransition(t),function(){var t={},n=r.parseCSS("transform");return t[n]=e._combineTransform(i),t},s)},i.prototype._fillCSSParams=function(t,e,r,o,i){var s,a=this,c=a._compatible.parseCSS("transition");return t=a._compatible.clone(t,e),t instanceof Array||(t=[t]),n.each(t,function(t){if(!t.api)throw new Error("不健全的配置！");n.forIn(t.api,function(e,f){s=this._compatible.addStatus(i,e),o[e]=f,e in this._store||(this._store[e]=n.css(this._dom,e)),c in this._store||(this._store[c]=n.css(this._dom,c)),t.property=s,r.push(a._compatible.parseTransition(t))},a)}),t},i.prototype._css=function(t,n){var e=[],r={},o={};this._fillCSSParams(t,n,e,r,o),this._step(e.join(","),function(){return r},o)},i.prototype.moveTo=function(t){var n=i._apiMap.moveTo;return t=this._patchMoveTo(t,n),this._css(t,n),this},i.prototype._patchMoveTo=function(t,e){t instanceof Array||(t=[t]);var r,o,i=this._dom,s={};return n.each(t,function(t){n.forKey(t,function(t){t in e&&(o=e[t],r=n.css(i,o),r&&"auto"!==r||(s[o]=0))})}),n.forIn(s,function(t,e){n.css(i,t,e)}),t},i.prototype.changeTo=function(t){var n=i._apiMap.changeTo;return t=this._patchMoveTo(t,i._apiMap.moveTo),this._css(t,n),this},i.prototype.moveBy=function(t){var n=i._apiMap.moveBy;return this._transform(t,n),this},i.prototype.scaleBy=function(t){var n=i._apiMap.scaleBy;return this._transform(t,n),this},i.prototype.skewBy=function(t){var n=i._apiMap.skewBy;return this._transform(t,n),this},i.prototype.rotateBy=function(t){var n=i._apiMap.rotateBy;return this._transform(t,n),this},i.prototype.mock=function(t,e){var r=i._apiMap[t],o={},s={},a=[];if("moveTo changeTo".indexOf(t)>-1)return this._fillCSSParams(e,r,a,o,s),[a.join(","),o,s];var c=this._compatible,f=c.parseCSS("transform"),p=[],u=c.cssMap("transform");if("mix"===t){var h,l=this._compatible.peelMould(e),m=0;return n.forIn(i._apiMap,function(t,r){t in e&&(h=e[t],"moveTo"===t||"changeTo"===t?(h=this._patchMoveTo(h,i._apiMap.moveTo),n.each(h,function(t){n.extend(t,l)}),this._fillCSSParams(h,r,a,o,s)):(this._fillTransformParams(h,r,p),m++))},this),m>0&&(s.transform=!1,e.property=u,a.push(c.parseTransition(e))),m>0&&(f=c.parseCSS("transform"),o[f]="old+; "+p.join(" ")),[a.join(","),o,s]}return this._fillTransformParams(e,r,p),s.transform=!1,e.property=u,o[f]="old+; "+p.join(" "),[c.parseTransition(e),o,s]},i.prototype.mix=function(t){var e,r=this._compatible.peelMould(t),o=[],s={},a={},c=[],f=0;n.forIn(i._apiMap,function(p,u){p in t&&(e=t[p],"moveTo"===p||"changeTo"===p?(e=this._patchMoveTo(e,i._apiMap.moveTo),n.each(e,function(t){n.extend(t,r)}),this._fillCSSParams(e,u,o,s,a)):(this._fillTransformParams(e,u,c),f++))},this);var p=this,u=p._compatible;if(f>0){var h=u.cssMap("transform");a.transform=!1,t.property=h,o.push(u.parseTransition(t))}return this._step(o.join(","),function(){if(f>0){var t=u.parseCSS("transform");s[t]=p._combineTransform(c,t)}return s},a),this},i.prototype.then=function(t){var n=this._steps.length;if(n>0){var e=this._steps[n-1],r=e.next;e.next=r?function(){r(),t()}:t}else t();return this},i.prototype._on=function(t,e){n.on(this._dom,t,e)},i.prototype._off=function(t,e){n.off(this._dom,t,e)},i.prototype._unListen=function(){this._monitorStart&&this._off(this._compatible.parseEvent(o.start),this._monitorStart),this._monitorEnd&&this._off(this._compatible.parseEvent(o.end),this._monitorEnd)},i.prototype.perspective=function(t){var n=this._compatible,r=this._dom.parentNode;return t===!1?e.css(r,n.parseCSS("transformStyle"),"flat",this):(e.css(r,n.parseCSS("transformStyle"),"preserve-3d",this),e.css(r,n.parseCSS("perspective"),t,this)),this},i});
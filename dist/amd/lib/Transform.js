window['define'] = typeof ESL_define === 'function' ? ESL_define : window['define'];define("Util",function(){var t={forIn:function(t,e,n){for(var r in t)if(e.call(n,r,t[r])===!1)return!1;return!0},forKey:function(t,e,n){for(var r in t)if(e.call(n,r)===!1)return!1;return!0},rewrite:function(e,n){return n?(t.forIn(n,function(t,n){e[t]=n}),e):e},define:function(t){t=t.split(".");for(var e,n=window;e=t.shift();)e in n||(n[e]={}),n=n[e]},extend:function(e,n){return e?(n&&t.forIn(n,function(t,n){t in e||(e[t]=n)}),e):n},inherit:function(t,e){var n=new Function;n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superClass=e},xInA:function(e,n){var r=-1;return t.each(n,function(t,n){return t===e?(r=n,!1):void 0}),r},arg2Ary:function(t){return Array.prototype.slice.call(t,0)},each:function(t,e,n){for(var r=0,i=t.length;i>r&&e.call(n,t[r],r,t)!==!1;r++);return r===t.length},random:{seed:[[48,9],[65,25],[97,25]],generator:function(t){return String.fromCharCode(t[0]+Math.round(t[1]*Math.random()))},word:function(t){var e;return e=0===t?Math.floor(2*Math.random())+1:Math.floor(3*Math.random()),this.generator(this.seed[e])},name:function(t){t=t||6;for(var e="",n=0;t>n;n++)e+=this.word(n);return e}},addClass:function(t,e){t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))||(t.className=(t.className+" "+e).trim())},removeClass:function(t,e){t.className=t.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").trim()},css:function(e,n,r){return"string"==typeof n?t.$css(e,n,r):void t.forIn(n,function(n,r){t.$css(e,n,r)})},stopPropagation:function(t){t.stopPropagation()},$css:function(t,e,n){if(void 0!==n)return t.style[e]=n,n;var r=window.getComputedStyle(t,null)[e];return r?r:t.style[e]},on:function(t,e,n){t.addEventListener(e,n,!1)},off:function(t,e,n){t.removeEventListener(e,n,!1)}};return t}),define("Checker",["Util"],function(t){function e(){this._list=t.arg2Ary(arguments)}return e.prototype.check=function(e){var n=this;if(e.length!==n._list.length)return!1;var r,i,o=t.each(e,function(t,e){if(r=n._list[e],i=typeof r,"string"===i){if(typeof t!==r)return!1}else if("function"===i&&!(t instanceof r))return!1});return o},e.stringObject=new e("string","object"),e.objectString=new e("object","string"),e.object=new e("object"),e.string=new e("string"),e.ssFunction=new e("string","string","function"),e.sFunction=new e("string","function"),e.array=new e(Array),e}),define("Event",function(){var t={style:"Style",css:"CSS",clear:"Clear",beforeStart:"BeforeStart",pause:"Pause",start:"Start",iteration:"Iteration",end:"End",next:"Next",over:"Over",on:"On",off:"Off",stop:"Stop",goon:"Goon",once:"Once",all:"All",emit:"Emit"};return t}),define("EventEmitter",["Checker","Event","Util"],function(t,e,n){function r(){this._triggers={}}return r.type={once:"once",all:"all"},r.prototype.on=function(t,n,r){if(!t)throw new Error("undefined event!");t in this._triggers?this._triggers[t].push({fn:n,option:r}):this._triggers[t]=[{fn:n,option:r}],this.emit(e.on,t,r)},r.prototype.off=function(r,i){if(t.string.check(arguments))r in this._triggers&&(this._triggers[r]=[],this.emit(e.off,r));else{if(!t.sFunction.check(arguments))throw new Error("incorrect parameter!");if(r in this._triggers){var o=-1;n.each(this._triggers[r],function(t,e){return t.fn===i?(o=e,!1):void 0}),o>-1&&(this._triggers[r].splice(o,1),this.emit(e.off,r))}}},r.prototype.once=function(t,n,i){i||(i={}),i.type=r.type.once,this.emit(e.once,t,i),this.on(t,n,i)},r.prototype.callWithScope=function(t,e,n){n=n||[],e&&e.hasOwnProperty("scope")?t.apply(e.scope,n):t.apply(this,n)},r.prototype.all=function(t,i,o){var s={},a=[];if(0===t.length)return void this.callWithScope(i,o);var c=this,p=function(t){return function(e,r){e in s&&(s[e]=!0,a[t]=r);var p=n.forIn(s,function(t,e){return e===!1?!1:void 0});p&&c.callWithScope(i,o,a)}};n.each(t,function(t,e){s[t]=!1,this.on(t,p(e),{type:r.type.all})},c),this.emit(e.all,t,o)},r.prototype.emit=function(t){var e,r,i,o,s=this._triggers[t],a=[],c=arguments;if(s){var p=this;if(n.each(s,function(t){i=t.fn,o=t.option,o?(e=o.scope,r=o.type):(e=!1,r=!1),e?i.apply(e,n.arg2Ary(c)):i.apply(p,n.arg2Ary(c)),r&&a.push(t)}),a.length>0){var f,u,h=[],l=0,m=0,d=s.length,_=a.length;for(f=a[m];d>l;)u=s[l],u===f?(m++,f=_>m?a[m]:-1):h.push(u),l++;0===h.length?delete this._triggers[t]:this._triggers[t]=h}}},r}),define("Compatible",["Util","Event"],function(t,e){var n={prefix:function(){var t=navigator.userAgent,e=t.indexOf("Opera")>-1,n=t.indexOf("Maxthon")>-1,r=!e&&t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1||t.indexOf("Trident")>-1,i=t.indexOf("Firefox")>-1,o=t.indexOf("Safari")>-1&&t.indexOf("Chrome")<1,s=t.indexOf("Chrome")>-1,a=t.indexOf("WebKit")>-1;return r?"-ms-":a||o||s||n?"-webkit-":e?"-o-":i?"-moz-":""}(),requestAnimationFrame:function(){if(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,!window.requestAnimationFrame){var e,n=[],r=function(){t.each(n,function(t){t()}),clearTimeout(e),e=!1,n=[]},i=function(t){n.push(t),e||(e=window.setTimeout(r,16))};window.requestAnimationFrame=i}return function(t){window.requestAnimationFrame(t)}}(),css:function(r,i,o,s){return o||""===o?void n.requestAnimationFrame(function(){t.css(r,i,o),s.emit(e.css,r,i,o)}):t.css(r,i)},reflow:function(t){n.requestAnimationFrame(function(){t.offsetWidth=t.offsetWidth})},parseEvent:function(t,e){var r=n.prefix.replace(/-/g,"");return"moz ms".indexOf(r)>-1?function(e){return t+e.toLowerCase()}:function(t){return r+e+t}}};return n}),define("TFCompatible",["Util","Event","EventEmitter","Compatible"],function(t,e,n,r){function i(){i.superClass.call(this)}return t.inherit(i,n),i.prototype.prefix=r.prefix,i._keyMap={transform:["transform"],transition:["transition"],duration:["transitionDuration","1s"],"function":["transitionTimingFunction","linear"],delay:["transitionDelay","0s"]},i.prototype.parseCSS=function(t){var e=this.prefix.replace(/-/g,"");return i.prototype.parseCSS="moz ms".indexOf(e)>-1?function(t){return t in i._keyMap?i._keyMap[t][0]:t}:function(t){return t in i._keyMap?(t=i._keyMap[t][0],e+t[0].toUpperCase()+t.substr(1)):t},this.parseCSS(t)},i.prototype.cssMap=function(t){var e;switch(t){case"transform":e="-webkit-"===this.prefix?this.prefix+t:t;break;case"backgroundColor":e="background-color";break;case"borderRadius":e="border-radius";break;case"fontSize":e="font-size";break;case"color":case"top":case"bottom":case"left":case"width":case"height":case"opacity":case"border":case"right":e=t;break;default:throw new Error(t+" not supported!")}return e},i.prototype.eventMap={"border-radius":["border-bottom-left-radius","border-top-left-radius","border-bottom-right-radius","border-top-right-radius"],border:["border-left-width","border-top-width","border-right-width","border-bottom-width","border-left-color","border-top-color","border-right-color","border-bottom-color"]},i.prototype.addStatus=function(t,e){var n=this.cssMap(e);return n in this.eventMap?t.add(n,this.eventMap[n]):t.add(n),n},i.prototype.peelMould=function(e){var n={};return t.forKey(i._keyMap,function(t){t in e&&(n[t]=e[t])}),n},i.prototype.clone=function(e,n){var r,o=i._keyMap;return e instanceof Array?(r=[],t.each(e,function(t){r.push(this.clone(t,n))},this)):"object"==typeof e?(r={},t.forIn(e,function(t,e){t in o?r[t]=this.clone(e,n):t in n&&("api"in r||(r.api={}),r.api[n[t]]=this.clone(e,n))},this)):r=e,r},i.prototype.parseTransition=function(t){function e(e,n){return n in t?t[n]:i._keyMap[n][1]}return"<property> <duration> <function> <delay>".replace(/<(.*?)>/g,e)},i.instance=function(){return i._compatible||(i._compatible=new i),i._compatible},i.prototype.parseEvent=r.parseEvent("transition","Transition"),i}),define("Pitch",["Checker"],function(t){function e(e,n,r){this._router=[],t.ssFunction.check(arguments)&&this.use(e,n,r)}return e.prototype.use=function(t,e,n){return this._router.push({name:t,keys:e+" ",handler:n}),this},e.prototype.next=function(t,e,n,r){var i=this._router[t];return i?"*"===i.keys.trim()?i.handler(e.trim(),n,r):i.keys.indexOf(e)>-1?i.handler(e.trim(),n,r):this.next(t+1,e,n,r):""},e.prototype["do"]=function(t,e,n){return this.next(0,t,e,n)},e}),define("KFCompatible",["Pitch","Util","Checker","Event","EventEmitter","Compatible"],function(t,e,n,r,i,o){function s(){s.superClass.call(this);var e=new t,n=this;e.use("prefixOnly","text-shadow backface-visibility transition transition-timing-function animation-timing-function transform-origin transform-style perspective-origin perspective background-clip background-origin",function(t,e){return"transform"===e&&(e=n.prefix+e),n.prefix+t+":"+e+";"}),e.use("needAll","box-shadow border-radius",function(t,e){return n.prefix+t+":"+e+";"+t+":"+e+";"}),e.use("extend","translateX translateY translateZ translate translate3d rotateX rotateY rotateZ rotate rotate3d skewX skewY skewZ skew scaleZ scaleX scaleY scale3d scale ",function(t,e,n){return"transform"in n?n.transform+=" "+t+"("+e+")":n.transform=t+"("+e+")",""}),e.use("transform","transform",function(t,e,n){return"transform"in n?n.transform+=" "+e:n.transform=e,""}),e.use("animation","animation",function(t,e){return n.prefix+t+":"+n.parseAnimation(e)+";"}),e.use("specialA","background background-image ",function(t,e){return t+":"+e.replace(/(linear|radial)-gradient/g,n.prefix+"$1-gradient")+";"}),e.use("specialB","mask-image",function(t,e){return n.prefix+t+":"+e.replace(/(linear|radial)-gradient/g,n.prefix+"$1-gradient")+";"}),e.use("rest","*",function(t,e){return t+":"+e+";"}),this._pitch=e,this._combine=new t("combine","transform",function(t,e){return n.prefix+t+":"+e+";"})}return e.inherit(s,i),s.prototype.prefix=o.prefix,s._keyMap={animation:["animation"],name:["animationName"],duration:["animationDuration","1s"],"function":["animationTimingFunction","linear"],delay:["animationDelay","0s"],count:["animationIterationCount",1],direction:["animationDirection","normal"],state:["animationPlayState","running"],mode:["animationFillMode","forwards"]},s.prototype.parseAnimation=function(t){function r(t,e){return e in i?i[e]:s._keyMap[e][1]}n.array.check(arguments)||(t=[t]);var i,o=[],a=this.animationTpl();return e.each(t,function(t){i=t,o.push(a.replace(/<(.*?)>/g,r))}),o.join(",")},s.prototype.animationTpl=function(){return this._animationTpl||("-moz-"===this.prefix?(this._animationTpl="<duration> <function> <delay> <direction> <mode> <count> <state> <name>",this._closeReg={start:"\\s",end:"(?:\\s*)$"}):(this._animationTpl="<name> <duration> <function> <delay> <count> <direction> <mode>",this._closeReg={start:"^(?:\\s*)",end:"\\s"})),this._animationTpl},s.prototype.regExp=function(t){return new RegExp(this._closeReg.start+t+this._closeReg.end)},s.prototype.keyframe=function(t){return"@"+this.prefix+"keyframes "+t},s.prototype.percent=function(t){t=(t+"").trim();var e=t.split(/\s+/);return e.join("%, ")+"%"},s.prototype.patchCombine=function(t,e){return this._combine["do"](t+" ",e)},s.prototype.patch=function(t,e,n){return this._pitch["do"](t+" ",e,n)},s.instance=function(){return s._compatible||(s._compatible=new s),s._compatible},s.prototype.css=function(t,e,n){return e=this.parseCSS(e),o.css(t,e,n,this)},s.prototype.parseCSS=function(t){var e=this.prefix.replace(/-/g,"");return s.prototype.parseCSS="moz"===e?function(t){return t in s._keyMap?s._keyMap[t][0]:t}:function(t){return t in s._keyMap?(t=s._keyMap[t][0],e+t[0].toUpperCase()+t.substr(1)):t},this.parseCSS(t)},s.prototype.parseEvent=o.parseEvent("animation","Animation"),s}),define("Compiler",["Checker","KFCompatible","Util","Event","EventEmitter"],function(t,e,n,r,i){function o(){o.superClass.call(this),this._classStore={},this._classMap={},this._keyframeMap={},this._keyframeStore={};var t=e.instance();this._compatible=t,this._classId=function(t){return"class("+t+")"},this._keyframeId=function(t){return"keyframe("+t+")"},this._classText=function(t,e){return"."+t.replace(/\s+/g," .")+" "+e},this._keyframeText=function(e,n){return t.keyframe(e)+n}}return n.inherit(o,i),o.prototype.defineClass=function(t,e){return t=t.trim(),this._classMap[t]=e,t},o.prototype.defineKeyframe=function(e,r){return null!==r&&(t.object.check(arguments)&&(r=arguments[0],e=n.random.name(8)),this._keyframeMap[e]=r),e},o.prototype.compile=function(){var t={},e={};n.forIn(this._classMap,function(e,n){t[e]=this._compileClass(n)},this),n.forIn(this._keyframeMap,function(t,n){e[t]=this._compileKeyframe(n)},this),this._classMap={},this._keyframeMap={},this._effect(t,e)},o.prototype._absorb=function(t,e,r,i,o){var s,a;n.forIn(t,function(t,n){s=e(t),a=r(t,n),t in i?this._refreshSheet(a,s):o.appendChild(this._styleSheet(a,s)),i[t]=n},this),t=null},o.prototype._effect=function(t,e){var n=this._fragment();this._absorb(t,this._classId,this._classText,this._classStore,n),this._absorb(e,this._keyframeId,this._keyframeText,this._keyframeStore,n),n.effect()},o.prototype._fragment=function(){var t=document.createDocumentFragment();return t.effect=function(){document.querySelector("head").appendChild(t)},t},o.prototype._styleSheet=function(t,e){var n=document.createElement("style");return n.type="text/css",n.id=e,n.appendChild(document.createTextNode(t)),this.emit(r.style,e,t),n},o.prototype.clear=function(){n.forIn(this._classStore,function(t){this._clearSheet(this._classId(t))},this),n.forIn(this._keyframeStore,function(t){this._clearSheet(this._keyframeId(t))},this),this._classStore={},this._keyframeStore={},this._classMap={},this._keyframeMap={}},o.prototype._refreshSheet=function(t,e){document.getElementById(e).innerHTML=t,this.emit(r.style,e,t)},o.prototype._clearSheet=function(t){document.querySelector("head").removeChild(document.getElementById(t))},o.prototype._compileClass=function(t){return"{"+this._compileContent(t)+"}"},o.prototype._compileContent=function(t){var e={},r=[];return n.forIn(t,function(t,n){r.push(this._compatible.patch(t,n,e))},this),n.forIn(e,function(t,e){r.push(this._compatible.patchCombine(t,e))},this),r.join("")},o.prototype._compileKeyframe=function(t){var e="{";return n.forIn(t,function(t,n){e+=this._compileFrame(t,n)},this),e+="}"},o.prototype._compileFrame=function(t,e){return this._compatible.percent(t)+this._compileClass(e)},o.instance=function(){return o._compiler||(o._compiler=new o),o._compiler},o}),define("Status",["Util"],function(t){function e(){this.init(),this.size=0,this.store=[]}return e.sep="|",e.prototype.init=function(){this.all={},this.once={},this.addUp=0},e.prototype.add=function(t,n,r){this.all[t]=!1;var i=e.sep;n&&(this.once[t]=i+n.join(i+i)+i),r||(this.store.push({all:t,once:n}),this.size++)},e.prototype.reset=function(){this.init(),t.each(this.store,function(t){this.add(t.all,t.once,!0)},this)},e.prototype.isDone=function(){return this.size===this.addUp},e.prototype.digest=function(n){var r=this.all,i=this.once,o=e.sep;n in r?(r[n]=!0,delete i[n],this.addUp++):t.forIn(i,function(t,e){return e=e.replace(o+n+o,""),i[t]=e,""===e?(r[n]=!0,this.addUp++,delete i[n],!1):void 0},this)},e}),define("Transform",["Checker","EventEmitter","Util","Compatible","TFCompatible","Compiler","Event","Status"],function(t,e,n,r,i,o,s,a){function c(t,e){c.superClass.call(this),this._dom=t,this._executeInTime=e,this._steps=[],this._store={},this._index=0,this._transformRecord="",this._compatible=i.instance(),this._listen()}return n.inherit(c,e),c.prototype._listen=function(){function t(t){return function(n){e.emit(t,n)}}var e=this,r=e._compatible;this.on(s.on,function(n,i){i===s.end&&(e._monitorEnd||(e._monitor=t(i),e._on(r.parseEvent(i),e._monitor)))}),this.on(s.end,function(t,i){if(e._index<e._steps.length){var o=e._steps[e._index],a=i.propertyName.replace(r.prefix,"");o.status.digest(a),o.status.isDone()&&(e._index++,o.next?(e.emit(s.next,o),o.next()):e.emit(s.over,o))}n.stopPropagation(i)})},c.prototype.setExecuteInTime=function(t){return this._executeInTime=t,this},c.prototype.reStore=function(){r.css(this._dom,this._store,"",this);for(var t;this._index>0;)this._index--,t=this._steps[this._index].status,t.reset();return this._transformRecord="",this},c.prototype.reflow=function(){return r.reflow(this._dom),this},c.prototype.reExecute=function(){return this.reStore().reflow(),this.execute()},c.prototype.execute=function(){if(this._index<this._steps.length){var t=this._steps[this._index];"execute"in t&&t.execute()}return this},c._apiMap={changeTo:{c:"color",bc:"backgroundColor",fs:"fontSize",br:"borderRadius",bo:"border",o:"opacity",l:"left",r:"right",t:"top",b:"bottom",w:"width",h:"height"},moveTo:{t:"top",l:"left",b:"bottom",r:"right"},moveBy:{x:"translateX",y:"translateY",z:"translateZ","2d":"translate","3d":"translate3d"},scaleBy:{x:"scaleX",y:"scaleY",z:"scaleZ","2d":"scale","3d":"scale3d"},rotateBy:{x:"rotateX",y:"rotateY",z:"rotateZ","3d":"rotate3d"},skewBy:{x:"skewX",y:"skewY","2d":"skew"}},c.prototype._step=function(t,e,n){var i=this,o=i._compatible,s={},a=i._steps.length;if(a>0){var c=i._steps[a-1],p=c.next;p?(c.next=function(){p(),r.css(i._dom,o.parseCSS("transition"),t,i),r.css(i._dom,e(),"",i)},i._index===i._steps.length&&(r.css(i._dom,o.parseCSS("transition"),t,i),r.css(i._dom,e(),"",i))):(c.next=function(){r.css(i._dom,o.parseCSS("transition"),t,i),r.css(i._dom,e(),"",i)},i._index===i._steps.length&&c.next())}else s.execute=function(){r.css(i._dom,o.parseCSS("transition"),t,i),r.css(i._dom,e(),"",i)},this._executeInTime&&s.execute();s.status=n,s.next=!1,this._steps.push(s)},c.prototype._combineTransform=function(t){return this._transformRecord+=t.join(" "),this._transformRecord},c.prototype._fillTransformParams=function(t,e,r){var i=this._compatible,o=i.parseCSS("transform"),s=i.parseCSS("transition");t=i.clone(t,e);var a=t.api;if(!a)throw new Error("不健全的配置项！");n.forIn(a,function(t,e){r.push(t+"("+e+")")}),o in this._store||(this._store[o]=n.css(this._dom,o)),s in this._store||(this._store[s]=n.css(this._dom,s))},c.prototype._transform=function(t,e){var n=this,r=n._compatible,i=r.cssMap("transform"),o=[];this._fillTransformParams(t,e,o);var s=new a;s.add("transform"),t.property=i,this._step(r.parseTransition(t),function(){var t={},e=r.parseCSS("transform");return t[e]=n._combineTransform(o),t},s)},c.prototype._fillCSSParams=function(t,e,r,i,o){var s,a=this,c=a._compatible.parseCSS("transition");return t=a._compatible.clone(t,e),t instanceof Array||(t=[t]),n.each(t,function(t){if(!t.api)throw new Error("不健全的配置！");n.forIn(t.api,function(e,p){s=this._compatible.addStatus(o,e),i[e]=p,e in this._store||(this._store[e]=n.css(this._dom,e)),c in this._store||(this._store[c]=n.css(this._dom,c)),t.property=s,r.push(a._compatible.parseTransition(t))},a)}),t},c.prototype._css=function(t,e){var n=[],r={},i=new a;this._fillCSSParams(t,e,n,r,i),this._step(n.join(","),function(){return r},i)},c.prototype.moveTo=function(t){var e=c._apiMap.moveTo;return t=this._patchMoveTo(t,e),this._css(t,e),this},c.prototype._patchMoveTo=function(t,e){t instanceof Array||(t=[t]);var r,i,o=this._dom,s={};return n.each(t,function(t){n.forKey(t,function(t){t in e&&(i=e[t],r=n.css(o,i),r&&"auto"!==r||(s[i]=0))})}),n.forIn(s,function(t,e){n.css(o,t,e)}),t},c.prototype.changeTo=function(t){var e=c._apiMap.changeTo;return t=this._patchMoveTo(t,c._apiMap.moveTo),this._css(t,e),this},c.prototype.moveBy=function(t){var e=c._apiMap.moveBy;return this._transform(t,e),this},c.prototype.scaleBy=function(t){var e=c._apiMap.scaleBy;return this._transform(t,e),this},c.prototype.skewBy=function(t){var e=c._apiMap.skewBy;return this._transform(t,e),this},c.prototype.rotateBy=function(t){var e=c._apiMap.rotateBy;return this._transform(t,e),this},c.prototype.mock=function(t,e){var r=c._apiMap[t],i={},o=new a,s=[];if("moveTo changeTo".indexOf(t)>-1)return this._fillCSSParams(e,r,s,i,o),[s.join(","),i,o];var p=this._compatible,f=p.parseCSS("transform"),u=[],h=p.cssMap("transform");if("mix"===t){var l,m=this._compatible.peelMould(e),d=0;return n.forIn(c._apiMap,function(t,r){t in e&&(l=e[t],"moveTo"===t||"changeTo"===t?(l=this._patchMoveTo(l,c._apiMap.moveTo),n.each(l,function(t){n.extend(t,m)}),this._fillCSSParams(l,r,s,i,o)):(this._fillTransformParams(l,r,u),d++))},this),d>0&&(o.add("transform"),e.property=h,s.push(p.parseTransition(e))),d>0&&(f=p.parseCSS("transform"),i[f]="old+; "+u.join(" ")),[s.join(","),i,o]}return this._fillTransformParams(e,r,u),o.add("transform"),e.property=h,i[f]="old+; "+u.join(" "),[p.parseTransition(e),i,o]},c.prototype.mix=function(t){var e,r=this._compatible.peelMould(t),i=[],o={},s=new a,p=[],f=0;n.forIn(c._apiMap,function(a,u){a in t&&(e=t[a],"moveTo"===a||"changeTo"===a?(e=this._patchMoveTo(e,c._apiMap.moveTo),n.each(e,function(t){n.extend(t,r)}),this._fillCSSParams(e,u,i,o,s)):(this._fillTransformParams(e,u,p),f++))},this);var u=this,h=u._compatible;if(f>0){var l=h.cssMap("transform");s.add("transform"),t.property=l,i.push(h.parseTransition(t))}return this._step(i.join(","),function(){if(f>0){var t=h.parseCSS("transform");o[t]=u._combineTransform(p,t)}return o},s),this},c.prototype.then=function(t){var e=this._steps.length;if(e>0){var n=this._steps[e-1],r=n.next;n.next=r?function(){r(),t()}:t}else t();return this},c.prototype._on=function(t,e){n.on(this._dom,t,e)},c.prototype._off=function(t,e){n.off(this._dom,t,e)},c.prototype._unListen=function(){this._monitorEnd&&this._off(this._compatible.parseEvent(s.end),this._monitorEnd)},c.prototype.perspective=function(t){var e=this._compatible,n=this._dom.parentNode;return t===!1?r.css(n,e.parseCSS("transformStyle"),"flat",this):(r.css(n,e.parseCSS("transformStyle"),"preserve-3d",this),r.css(n,e.parseCSS("perspective"),t,this)),this},c});
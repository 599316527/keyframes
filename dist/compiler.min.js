function Compiler(){this._stringObject=new Checker("string","object"),this._object=new Checker("object"),this._classStore={},this._classMap={},this._keyframeMap={},this._keyframeStore={};var e=new Compatible;this._compatible=e,this._classId=function(e){return"class("+e+")"},this._keyframeId=function(e){return"keyframe("+e+")"},this._classText=function(e,t){return"."+e+" "+t},this._keyframeText=function(t,r){return e.keyframe(t)+r}}Compiler.prototype.defineClass=function(e,t){if(this._object.check(arguments))t=arguments[0],e=Util.random.name(8);else if(!this._stringObject.check(arguments))throw new Error("incorrect parameter, metaData is required！");return this._classMap[e]=t,e},Compiler.prototype.defineKeyframe=function(e,t){if(this._object.check(arguments))t=arguments[0],e=Util.random.name(8);else if(!this._stringObject.check(arguments))throw new Error("incorrect parameter, metaData is required！");return this._keyframeMap[e]=t,e},Compiler.prototype.compile=function(){var e,t={},r={};for(var i in this._classMap)e=this._classMap[i],t[i]=this._compileClass(e),delete this._classMap[i];for(var s in this._keyframeMap)e=this._keyframeMap[s],r[s]=this._compileKeyframe(e),delete this._keyframeMap[s];this._effect(t,r)},Compiler.prototype._absorb=function(e,t,r,i,s){var o,a;for(var n in e)o=t(n),a=r(n,e[n]),n in i?this._refreshStyleSheet(a,o):s.appendChild(this._styleSheet(a,o)),i[n]=e[n],delete e[n]},Compiler.prototype._effect=function(e,t){var r=document.createDocumentFragment();this._absorb(e,this._classId,this._classText,this._classStore,r),this._absorb(t,this._keyframeId,this._keyframeText,this._keyframeStore,r),document.querySelector("head").appendChild(r)},Compiler.prototype._styleSheet=function(e,t){var r=document.createElement("style");return r.type="text/css",r.id=t,r.innerHTML=e,r},Compiler.prototype._refreshStyleSheet=function(e,t){document.getElementById(t).innerHTML=e},Compiler.prototype._compileClass=function(e){var t,r="{",i={};for(t in e)r+=this._compatible.patch(t,e[t],i);for(t in i)r+=this._compatible.patchCombine(t,i[t]);return r+="}"},Compiler.prototype._compileKeyframe=function(e){var t="{";for(var r in e)t+=this._compileFrame(r,e[r]);return t+="}"},Compiler.prototype._compileFrame=function(e,t){return e+"%"+this._compileClass(t)};
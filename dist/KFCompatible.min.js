function KFCompatible(){KFCompatible.superClass.call(this);var t=new Pitch,i=this;t.use("prefixOnly","text-shadow backface-visibility transition transition-timing-function animation-timing-function transform-origin transform-style perspective-origin perspective background-clip background-origin",function(t,e){return"transform"===e&&(e=i.prefix+e),i.prefix+t+":"+e+";"}),t.use("needAll","box-shadow border-radius",function(t,e){return i.prefix+t+":"+e+";"+t+":"+e+";"}),t.use("extend","translateX translateY translateZ translate translate3d rotateX rotateY rotateZ rotate rotate3d skewX skewY skewZ skew scaleZ scaleX scaleY scale3d scale ",function(t,i,e){return"transform"in e?e.transform+=" "+t+"("+i+")":e.transform=t+"("+i+")",""}),t.use("transform","transform",function(t,i,e){return"transform"in e?e.transform+=" "+i:e.transform=i,""}),t.use("animation","animation",function(t,e){return i.prefix+t+":"+i.parseAnimation(e)+";"}),t.use("specialA","background background-image ",function(t,e){return t+":"+e.replace(/(linear|radial)-gradient/g,i.prefix+"$1-gradient")+";"}),t.use("specialB","mask-image",function(t,e){return i.prefix+t+":"+e.replace(/(linear|radial)-gradient/g,i.prefix+"$1-gradient")+";"}),t.use("rest","*",function(t,i){return t+":"+i+";"}),this._pitch=t,this._combine=new Pitch("combine","transform",function(t,e){return i.prefix+t+":"+e+";"})}Util.inherit(KFCompatible,EventEmitter),KFCompatible.prototype.prefix=Compatible.prefix,KFCompatible._keyMap={animation:["animation"],name:["animationName"],duration:["animationDuration","1s"],"function":["animationTimingFunction","linear"],delay:["animationDelay","0s"],count:["animationIterationCount",1],direction:["animationDirection","normal"],state:["animationPlayState","running"],mode:["animationFillMode","forwards"]},KFCompatible.prototype.parseAnimation=function(t){function i(t,i){return i in e?e[i]:KFCompatible._keyMap[i][1]}Checker.array.check(arguments)||(t=[t]);var e,n=[],a=this.animationTpl();return Util.each(t,function(t){e=t,n.push(a.replace(/<(.*?)>/g,i))}),n.join(",")},KFCompatible.prototype.animationTpl=function(){return this._animationTpl||("-moz-"===this.prefix?(this._animationTpl="<duration> <function> <delay> <direction> <mode> <count> <state> <name>",this._closeReg={start:"\\s",end:"(?:\\s*)$"}):(this._animationTpl="<name> <duration> <function> <delay> <count> <direction> <mode>",this._closeReg={start:"^(?:\\s*)",end:"\\s"})),this._animationTpl},KFCompatible.prototype.regExp=function(t){return new RegExp(this._closeReg.start+t+this._closeReg.end)},KFCompatible.prototype.keyframe=function(t){return"@"+this.prefix+"keyframes "+t},KFCompatible.prototype.percent=function(t){t=(t+"").trim();var i=t.split(/\s+/);return i.join("%, ")+"%"},KFCompatible.prototype.patchCombine=function(t,i){return this._combine["do"](t+" ",i)},KFCompatible.prototype.patch=function(t,i,e){return this._pitch["do"](t+" ",i,e)},KFCompatible.instance=function(){return KFCompatible._compatible||(KFCompatible._compatible=new KFCompatible),KFCompatible._compatible},KFCompatible.prototype.css=function(t,i,e){return i=this.parseCSS(i),Compatible.css(t,i,e,this)},KFCompatible.prototype.parseCSS=function(t){var i=this.prefix.replace(/-/g,"");return KFCompatible.prototype.parseCSS="moz"===i?function(t){return t in KFCompatible._keyMap?KFCompatible._keyMap[t][0]:t}:function(t){return t in KFCompatible._keyMap?(t=KFCompatible._keyMap[t][0],i+t[0].toUpperCase()+t.substr(1)):t},this.parseCSS(t)},KFCompatible.prototype.parseEvent=Compatible.parseEvent("animation","Animation");
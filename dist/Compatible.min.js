function Compatible(){var t=new Pitch,n=this;t.use("prefixOnly","text-shadow transition transition-timing-function animation-timing-function transform-origin",function(t,e){return n.prefix+t+":"+e+";"}),t.use("needAll","box-shadow border-radius",function(t,e){return n.prefix+t+":"+e+";"+t+":"+e+";"}),t.use("extend","translateX translateY translateZ translate translate3d rotateX rotateY rotateZ rotate rotate3d skewX skewY skewZ skew scaleZ scaleX scaleY scale3d scale perspective",function(t,n,e){return"transform"in e?e.transform+=" "+t+"("+n+")":e.transform=t+"("+n+")",""}),t.use("transform","transform",function(t,n,e){return"transform"in e?e.transform+=" "+n:e.transform=n,""}),t.use("animation","animation",function(t,e){return n.prefix+t+":"+n.parseAnimation(e)+";"}),t.use("special","background",function(t,e){return t+":"+e.replace(/linear-gradient/g,n.prefix+"linear-gradient")+";"}),t.use("rest","*",function(t,n){return t+":"+n+";"}),this._pitch=t,this._combine=new Pitch("combine","transform",function(t,e){return n.prefix+t+":"+e+";"})}Compatible.prototype.prefix=function(){var t=navigator.userAgent,n=t.indexOf("Opera")>-1,e=t.indexOf("Maxthon")>-1,i=!n&&t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1||t.indexOf("Trident")>-1,o=t.indexOf("Firefox")>-1,a=t.indexOf("Safari")>-1&&t.indexOf("Chrome")<1,r=t.indexOf("Chrome")>-1,s=t.indexOf("WebKit")>-1;return i?"-ms-":s||a||r||e?"-webkit-":n?"-o-":o?"-moz-":""}(),Compatible._keyMap={animation:["animation"],name:["animationName"],duration:["animationDuration","1s"],"function":["animationTimingFunction","linear"],delay:["animationDelay","0s"],count:["animationIterationCount",1],direction:["animationDirection","normal"],state:["animationPlayState","running"],mode:["animationFillMode","forwards"]},Compatible.prototype.parseAnimation=function(t){function n(t,n){return n in e?e[n]:Compatible._keyMap[n][1]}Checker.array.check(arguments)||(t=[t]);var e,i=[],o=this.animationTpl();return Util.each(t,function(t){e=t,i.push(o.replace(/<(.*?)>/g,n))}),i.join(",")},Compatible.prototype.animationTpl=function(){return this._animationTpl||("-moz-"===this.prefix?(this._animationTpl="<duration> <function> <delay> <direction> <mode> <count> <state> <name>",this._closeReg={start:"\\s",end:"(?:\\s*)$"}):(this._animationTpl="<name> <duration> <function> <delay> <count> <direction> <mode>",this._closeReg={start:"^(?:\\s*)",end:"\\s"})),this._animationTpl},Compatible.prototype.regExp=function(t){return new RegExp(this._closeReg.start+t+this._closeReg.end)},Compatible.prototype.keyframe=function(t){return"@"+this.prefix+"keyframes "+t},Compatible.prototype.percent=function(t){t=(t+"").trim();var n=t.split(/\s+/);return n.join("%, ")+"%"},Compatible.prototype.patchCombine=function(t,n){return this._combine["do"](t+" ",n)},Compatible.prototype.patch=function(t,n,e){return this._pitch["do"](t+" ",n,e)},Compatible.instance=function(){return Compatible._compatible||(Compatible._compatible=new Compatible),Compatible._compatible},Compatible.prototype.css=function(t,n,e){return n=this.parseCSS(n),e||""===e?void this.requestAnimationFrame(function(){Util.css(t,n,e)}):Util.css(t,n)},Compatible.prototype.parseCSS=function(t){var n=this.prefix.replace(/-/g,"");return Compatible.prototype.parseCSS="moz"===n?function(t){return t in Compatible._keyMap?Compatible._keyMap[t][0]:t}:function(t){return t in Compatible._keyMap?(t=Compatible._keyMap[t][0],n+t[0].toUpperCase()+t.substr(1)):t},this.parseCSS(t)},Compatible.prototype.parseEvent=function(t){var n=this.prefix.replace(/-/g,"");return Compatible.prototype.parseEvent="moz"===n?function(t){return"animation"+t.toLowerCase()}:function(t){return n+"Animation"+t},this.parseEvent(t)},Compatible.prototype.requestAnimationFrame=function(){return window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),function(t){window.requestAnimationFrame(t)}}();
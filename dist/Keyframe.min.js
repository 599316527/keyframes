function Keyframe(t,e){function n(t){return function(){i.emit(t,arguments)}}if(Keyframe.superClass.call(this),this._compiler=Compiler.instance(),this._compatible=Compatible.instance(),this._init(t),Checker.array.check([e])){var i=this;Util.each(e,function(t){i._animationStatus[t.name]=!1}),this._animations=e}else this._animations=[e],this._animationStatus[e.name]=!1;return this.on(Event.on,function(t,e){e===Event.start?i._monitorStart||(i._monitorStart=n(e),Util.on(i._dom,i._compatible.parseEvent(e),i._monitorStart)):e===Event.end?i._monitorEnd||(i._monitorEnd=n(e),Util.on(i._dom,i._compatible.parseEvent(e),i._monitorEnd)):e===Event.iteration&&(i._monitorIteration||(i._monitorIteration=n(e),Util.on(i._dom,i._compatible.parseEvent(e),i._monitorIteration)))}),this}Util.inherit(Keyframe,EventEmitter),Keyframe.prototype._init=function(t){this._dom=t,this._animationStatus={}},Keyframe.prototype.start=function(){var t=this._compatible.parseAnimation(this._animations);return this.emit(Event.beforeStart),this._compatible.addAnimation(this._dom,t),this},Keyframe.prototype.pause=function(t){return this._playState("paused",t),this},Keyframe.prototype.goon=function(t){return this._playState("running",t),this},Keyframe.prototype._c2A=function(t){var e=Util.css(this._dom,this._compatible.parseCSS(t));return e.split(/,\s?/)},Keyframe.prototype._playState=function(t,e){var n,i=this._c2A("name"),r=this._c2A("state");if(e)n=Util.xInA(e,i),n>-1&&(r[n]=t);else{var a;Util.each(this._animations,function(e){a=e.name,n=Util.xInA(a,i),n>-1&&(r[n]=t)})}return this._compatible.css(this._dom,"state",r.join(", ")),this},Keyframe.prototype.addClass=function(t){return Util.addClass(this._dom,t),this},Keyframe.prototype.removeClass=function(t){return Util.removeClass(this._dom,t),this},Keyframe.defineKeyframe=function(t,e){if(Checker.object.check(arguments)&&(e=arguments[0],t=Util.random.name(8)),Checker.stringObject.check(arguments))return new FrameProxy(t,e);throw new Error("incorrect parameters!")},Keyframe.defineClass=function(t,e){if(Checker.object.check(arguments)&&(e=arguments[0],t=Util.random.name(8)),Checker.stringObject.check(arguments))return new ClassProxy(t,e);if(Checker.string.check(arguments))return new ClassProxy(t);throw new Error("incorrect parameters!")},Keyframe.compile=function(){Compiler.instance().compile()};